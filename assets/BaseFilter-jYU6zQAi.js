import{p as W,l as u,m,F as le,C as re,v as d,u as p,R as U,d as ue,r as C,S as de,k as l,w as A,o as fe,a as ce,E,Y as me,H as b,s as N,q as k,z as x,x as R,J as F,y as _,D as pe,I as ve,K as he,B as j}from"./vue.esm-bundler-B9HtKiky.js";import{a as w,B as z}from"./Badges-pO3c388I.js";import{I as J,a as K}from"./Icon-9wG2dPCy.js";import{S as ye}from"./Search-Ds3uSbBm.js";import{a as ge,O as Oe,S as be,b as T}from"./SelectList-BwDog7oc.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as _e}from"./Tooltip-DcR5pY64.js";import{l as r}from"./lodash-DHyxJ22h.js";const Te=["data-testid"],Ce=["data-testid"],G=W({name:"ChoosenMiniOptions",__name:"ChoosenMiniOptions",props:{options:{},dataTestid:{default:"ChoosenMiniOptions"}},emits:["remove"],setup(i,{emit:S}){const e=i,h=S,v=y=>{h("remove",y)};return(y,g)=>(u(),m("div",{class:"choosen-mini-options","data-testid":e.dataTestid},[(u(!0),m(le,null,re(i.options,(s,o)=>(u(),m("div",{key:s.key,class:"choosen-mini-options__option","data-testid":`${e.dataTestid}-Option-Item${o}`},[d(z,{"data-testid":`${e.dataTestid}-Badge${o}`,type:p(w).blue,text:p(ge)(s)?s.hint:s.value,class:"choosen-mini-options__badges",disabled:""},null,8,["data-testid","type","text"]),d(K,{"data-testid":`${e.dataTestid}-Icon${o}`,name:p(J).crossLarge,width:10,height:10,class:"choosen-mini-options__cross",onClick:I=>v(s.key)},null,8,["data-testid","name","onClick"])],8,Ce))),128))],8,Te))}}),D=Y(G,[["__scopeId","data-v-d23b1f89"]]);G.__docgenInfo={name:"ChoosenMiniOptions",exportName:"default",displayName:"ChoosenMiniOptions",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'ChoosenMiniOptions'"}},{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"OptionsObject"}]},{name:"Array",elements:[{name:"IOptionsObjectWithHint"}]}]}}],events:[{name:"remove",type:{names:["string"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Select/ChoosenMiniOptions.vue"]};const ke=["data-testid"],we=["data-testid"],Se=["data-testid"],$e=["data-testid"],Be=["data-testid"],Me=["data-testid"],Q=W({name:"BaseFilter",__name:"BaseFilter",props:U({options:{},title:{},isSearch:{type:Boolean,default:!1},isPosibleToClear:{type:Boolean,default:!1},isShowMiniOptions:{type:Boolean,default:!1},isUseAnchor:{type:Boolean,default:!1},isOpened:{type:Boolean,default:!1},tooltipPosition:{default:"top-center"},disabled:{type:Boolean,default:!1},onUnmountPagination:{},defaultOption:{default:"Выберите значение"},class:{},dataTestid:{default:"BaseFilter"}},{modelValue:{},modelModifiers:{}}),emits:U(["change","unmount-open","unmount-search","unmount-search-enter","unmount-pagination"],["update:modelValue"]),setup(i,{emit:S}){const e=i,h=ue({isHovered:!1}),v=S,y=C(null),g=C(null),s=de(i,"modelValue"),o=C(e.isOpened),I=l(()=>[{filter_disabled:e.disabled},e.class]);A(o,()=>{v("unmount-open",o.value),f.value=""}),A(()=>e.isOpened,()=>{if(e.disabled){o.value=!1;return}o.value=e.isOpened}),A(()=>e.onUnmountPagination,()=>{q()});const f=C(""),X=l(()=>{let t=[];return f.value?(T(e.options)?t=e.options.filter(a=>{var n;return a.value.toLowerCase().includes(f.value.toLowerCase())||((n=a==null?void 0:a.hint)==null?void 0:n.toLowerCase().includes(f.value.toLowerCase()))}):t=e.options.filter(a=>a.value.toLowerCase().includes(f.value.toLowerCase())),t):(T(e.options),t=e.options,t)}),c=l(()=>{var a;return((a=e.options.find(n=>r.isArray(s.value)?s.value.includes(n.key):n.key===String(s.value)))==null?void 0:a.value)||e.defaultOption}),Z=l(()=>e.options.filter(t=>r.isArray(s.value)?s.value.includes(t.key)&&t.value!==c.value:t.key===String(s.value))),ee=l(()=>e.options.filter(t=>r.isArray(s.value)?s.value.includes(t.key)&&t.value===c.value:t.key===String(s.value))),P=l(()=>{var n,L,H;const t=e.options;let a;return r.isArray(s.value)?T(t)?a=(n=t.find(O=>O.value===c.value))==null?void 0:n.hint:a=(L=t.find(O=>O.value===c.value))==null?void 0:L.value:a=(H=t.find(O=>O.key===String(s.value)))==null?void 0:H.value,a||""}),te=()=>{h.isHovered=!0},ae=()=>{h.isHovered=!1},se=l(()=>{var t;return T(e.options)?h.isHovered&&!!P.value:((t=y.value)==null?void 0:t.isSpanOverflow)||!1}),ne=l(()=>r.isArray(s.value)?e.isPosibleToClear&&s.value.length>0:e.isPosibleToClear&&s.value),$=l(()=>r.isArray(s.value)&&s.value.length>1),B=l(()=>r.isArray(s.value)?s.value.length:null),M=async t=>{if(e.disabled){o.value=!1;return}if(r.isArray(s.value))s.value.includes(t)?s.value=s.value.filter(a=>a!==t):s.value=[...s.value,t];else{let a=e.options.find(n=>n.key===t);!a&&T(e.options)&&(a=e.options.find(n=>n.hint===t)),s.value=(a==null?void 0:a.key)||"",o.value=!1}await j(),v("change",String(s.value))},ie=t=>{if(e.disabled){o.value=!1;return}o.value=t},oe=async()=>{e.disabled||(r.isArray(s.value)?s.value=[]:s.value="",await j(),v("change",s.value))},V=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting&&v("unmount-pagination")})}),q=()=>{g.value&&e.onUnmountPagination&&(V.unobserve(g.value),V.observe(g.value))};return fe(()=>{q()}),ce(()=>{V.disconnect()}),(t,a)=>(u(),E(be,{"header-classes":"filter__header","options-classes":"filter__options","is-opened":o.value,class:R(["filter",I.value]),"is-use-anchor":i.isUseAnchor,"data-testid":e.dataTestid,disabled:i.disabled,onChange:ie},me({header:b(()=>[N(t.$slots,"header",{},()=>[k("span",{class:R(["filter__header-title",{"filter__header-title__active":o.value}]),"data-testid":`${e.dataTestid}-Title`},x(i.title),11,ke),d(_e,{position:i.tooltipPosition,type:"blue","is-can-show":se.value&&!($.value&&i.isShowMiniOptions),hint:P.value,"hint-gap":28,class:"filter__header-tooltip","data-testid":`${e.dataTestid}-Tooltip`},{default:b(()=>[d(z,{ref_key:"badgesRef",ref:y,type:i.disabled?p(w).disabled:c.value===e.defaultOption?p(w).default:p(w).blue,class:"filter__options-badge","data-testid":`${e.dataTestid}-Badge`,text:c.value,onMouseenter:te,onMouseleave:ae,disabled:""},null,8,["type","data-testid","text"]),$.value&&i.isShowMiniOptions?(u(),m("div",{key:0,class:"filter__values","data-testid":`${e.dataTestid}-Filter-Value`},[d(D,{"data-testid":`${e.dataTestid}-Filter-Value-MiniOptions`,onClick:a[0]||(a[0]=F(()=>{},["stop"])),options:ee.value,onRemove:M},null,8,["data-testid","options"])],8,we)):_("",!0)]),_:1},8,["position","is-can-show","hint","data-testid"]),B.value&&B.value>1?(u(),m("span",{key:0,class:"filter__count","data-testid":`${e.dataTestid}-Filter-Count`},[pe(" +"+x(B.value-1)+" ",1),$.value?(u(),m("div",{key:0,class:"filter__values","data-testid":`${e.dataTestid}-Filter-Values`},[d(D,{onClick:a[1]||(a[1]=F(()=>{},["stop"])),options:Z.value,onRemove:M,"data-testid":`${e.dataTestid}-MiniOptions`},null,8,["options","data-testid"])],8,$e)):_("",!0)],8,Se)):_("",!0),ne.value?(u(),m("span",{key:1,class:"filter__cross",onClick:F(oe,["stop"]),"data-testid":`${e.dataTestid}-Filter-Cross`},[d(K,{name:p(J).crossLarge,width:16,height:16},null,8,["name"])],8,Be)):_("",!0)],!0)]),options:b(()=>[i.isSearch?(u(),E(ye,{key:0,modelValue:f.value,"onUpdate:modelValue":a[2]||(a[2]=n=>f.value=n),"show-history":!1,"data-testid":`${e.dataTestid}-Search`,onInput:a[3]||(a[3]=n=>t.$emit("unmount-search",n)),onEnter:a[4]||(a[4]=n=>t.$emit("unmount-search-enter",n))},null,8,["modelValue","data-testid"])):_("",!0),d(Oe,{"data-testid":`${e.dataTestid}-Options`,class:"filter__options-option",options:X.value,"default-option":c.value,onChange:M},{default:b(()=>[k("li",{class:"filter__options-underline","data-testid":`${e.dataTestid}-Underline`},[...a[5]||(a[5]=[k("hr",{class:"filter__options-underline-hr"},null,-1)])],8,Me)]),_:1},8,["data-testid","options","default-option"]),ve(k("div",{ref_key:"lastOptionRef",ref:g,class:"filter__last-option"},null,512),[[he,i.onUnmountPagination]])]),_:2},[t.$slots.body?{name:"body",fn:b(n=>[N(t.$slots,"body",{closeOpenList:n.closeOpenList},void 0,!0)]),key:"0"}:void 0]),1032,["is-opened","class","is-use-anchor","data-testid","disabled"]))}}),Ue=Y(Q,[["__scopeId","data-v-1d8146d1"]]);Q.__docgenInfo={name:"BaseFilter",exportName:"default",displayName:"BaseFilter",description:"",tags:{},props:[{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"OptionsObject"}]},{name:"Array",elements:[{name:"IOptionsObjectWithHint"}]}]}},{name:"title",required:!0,type:{name:"string"}},{name:"isSearch",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isPosibleToClear",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isShowMiniOptions",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isUseAnchor",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isOpened",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"tooltipPosition",required:!1,type:{name:"TTooltipPosition"},defaultValue:{func:!1,value:"'top-center'"}},{name:"disabled",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"onUnmountPagination",required:!1,type:{name:"TSFunctionType"}},{name:"defaultOption",defaultValue:{func:!1,value:"'Выберите значение'"}},{name:"dataTestid",defaultValue:{func:!1,value:"'BaseFilter'"}}],events:[{name:"unmount-search",type:{names:["string"]}},{name:"unmount-search-enter",type:{names:["string"]}},{name:"change",type:{names:["union"],elements:[{name:"string"},{name:"Array",elements:[{name:"string"}]}]}},{name:"unmount-open",type:{names:["boolean"]}},{name:"unmount-pagination"}],slots:[{name:"body",scoped:!0,bindings:[{name:"close-open-list",title:"binding"}]},{name:"header"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Select/BaseFilter.vue"]};export{Ue as B};
