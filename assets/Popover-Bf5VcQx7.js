import{j as G,b as H,f as y,r as _,w as T,q as X,s as J,v as E,x as K,k as d,y as $,z as I,u as Q,l as h,A as N,n as B,B as L,C as Z,T as ee,F as te,D as oe,E as V,G as se,m as ae,p as ne,H as ie,I as le}from"./vue.esm-bundler-CiAvViym.js";import{I as re,a as ce}from"./Icon-Bf7DVt4B.js";import{v as de}from"./index-CoJvTKID.js";import{T as ue}from"./Tooltip-CwpoxGCs.js";import{c as w}from"./change-style-properties-1EhjFsjc.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const fe=["data-testid"],me=["data-testid"],ve=["data-testid"],he=["onClick","data-testid"],q=G({__name:"Popover",props:{isShow:{type:Boolean},iconName:{default:re.moreVertical},options:{default:()=>[]},tooltip:{default:""},tooltipPosition:{default:"top-left"},isWCUse:{type:Boolean},position:{default:"bottom"},dataTestid:{default:"Popover"}},emits:["close"],setup(O,{emit:x}){const t=O,F=x,a=H({isShow:!1}),z=y(()=>{var o;const e=(o=s.value)==null?void 0:o.closest("dialog");return e||"body"}),u=CSS.supports("top","anchor(bottom)"),D=K(),S=y(()=>`--anchor-popover-${D}`),s=_(null),n=_(null),g=_(null),R=y(()=>({"popover-yui-kit__wrapper":!0,"active-yui-kit":a.isShow,"empty-yui-kit":t.options.length===0})),A=()=>a.isShow=!a.isShow,f=()=>{a.isShow=!1,F("close")},U=e=>{e.function(),f()},c=()=>{requestAnimationFrame(()=>{if(!s.value||!n.value||!a.isShow)return;const e={},o=s.value.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop,i=window.pageXOffset||document.documentElement.scrollLeft;let l=o.bottom+r,m=o.left+i;const v=s.value.closest("dialog");if(v){const p=v.getBoundingClientRect();l=o.top-p.top,m=o.left-p.left;const Y=v.scrollTop,j=v.scrollLeft;l+=Y,m+=j,l+=10}l+=10,e["--popover-top"]=`${l}px`,u||(e["--popover-left"]=`${m}px`),w(e,n.value),(()=>{if(!n.value)return;const p=n.value.getBoundingClientRect();p.right>window.innerWidth&&(u?e["--popover-right"]="anchor(right) ":e["--popover-right"]=`${o.right-p.width}px`)})(),e["--popover-right"]&&(e.left="auto",w(e,n.value))})},k=e=>{const o=e.getBoundingClientRect(),r=document.elementFromPoint(o.left,o.top),i=document.elementFromPoint(o.right,o.bottom);!(r&&e.contains(r))&&!(i&&e.contains(i))&&f()},b=new IntersectionObserver(e=>{e.forEach(o=>{o.isIntersecting||f()})}),W=()=>{s.value&&n.value&&(window.addEventListener("scroll",c,!0),window.addEventListener("resize",c))},C=()=>{s.value&&n.value&&(window.removeEventListener("scroll",c,!0),window.removeEventListener("resize",c))},M=()=>{s.value&&window.addEventListener("scroll",k.bind(null,s.value),!0)},P=()=>{s.value&&window.removeEventListener("scroll",k.bind(null,s.value),!0)};return T(()=>t.isShow,()=>a.isShow=t.isShow),T(()=>a.isShow,()=>{a.isShow?(c(),M()):P(),!u&&(a.isShow?W():C())}),X(()=>{s.value&&w({"anchor-name":`${S.value}`},s.value),n.value&&w({"position-anchor":`${S.value}`},n.value),g.value&&b.observe(g.value),u||c()}),J(()=>{b.disconnect(),P(),u||C()}),(e,o)=>(d(),E(ue,{hint:t.tooltip,size:"small",type:"black",position:t.tooltipPosition,"data-testid":t.dataTestid,"is-can-show":!!t.tooltip&&!a.isShow&&t.options.length>0},{default:$(()=>[I((d(),h("div",{class:"popover-yui-kit",ref_key:"popover",ref:g,"data-testid":`${t.dataTestid}-Popover`},[N("div",{ref_key:"reference",ref:s,class:Z(R.value),"data-testid":`${t.dataTestid}-PopoverShow`,onClick:A},[B(e.$slots,"trigger",{},()=>[L(ce,{class:"popover-yui-kit__icon",name:t.iconName,"data-testid":`${t.dataTestid}-PopoverShow-Icon`},null,8,["name","data-testid"])],!0)],10,me),(d(),E(ee,{to:z.value,disabled:t.isWCUse},[L(le,{name:"popover-animate"},{default:$(()=>[I(N("div",{class:"popover-yui-kit__content",style:V({transform:`translateY(${t.position==="top"?"-115px":0})`}),ref_key:"floating",ref:n},[B(e.$slots,"default",{},()=>{var r;return[(r=t.options)!=null&&r.length?(d(),h("div",{key:0,class:"popover-yui-kit__options","data-testid":`${t.dataTestid}-PopoverShow-Options`},[(d(!0),h(te,null,oe(t.options,(i,l)=>(d(),h("div",{class:"popover-yui-kit__options__item",key:l,style:V(i.style),onClick:se(m=>U(i),["stop"]),"data-testid":`${t.dataTestid}-Item${l}`},ae(i.value),13,he))),128))],8,ve)):ne("",!0)]},!0)],4),[[ie,a.isShow]])]),_:3})],8,["to","disabled"]))],8,fe)),[[Q(de),f,void 0,{bubble:!0}]])]),_:3},8,["hint","position","data-testid","is-can-show"]))}}),Ce=pe(q,[["__scopeId","data-v-f21d7da7"]]);q.__docgenInfo={exportName:"default",displayName:"Popover",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Popover'"}},{name:"isShow",required:!1,type:{name:"boolean"}},{name:"iconName",required:!1,type:{name:"IconNameEnum"},defaultValue:{func:!1,value:"IconNameEnum.moreVertical"}},{name:"options",required:!1,type:{name:"Array",elements:[{name:"IPopoverOption"}]},defaultValue:{func:!1,value:"() => []"}},{name:"tooltip",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"''"}},{name:"tooltipPosition",required:!1,type:{name:"TTooltipPosition"},defaultValue:{func:!1,value:"'top-left'"}},{name:"isWCUse",required:!1,type:{name:"boolean"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"top"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'bottom'"}}],events:[{name:"close"}],slots:[{name:"trigger"},{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Popover/Popover.vue"]};export{Ce as P};
