import{j as S,b as P,r as z,w as m,s as B,l as d,A as D,m as F,p as V,B as C,C as W,x as s,D as N,E as g,u as h,F as A,k as r}from"./vue.esm-bundler-DC1UwcWE.js";import{a as I,I as v}from"./Icon-CVpBHwEh.js";import{S as R}from"./sizes-9jYRAigb.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j=["data-testid"],K=["data-testid"],O=["data-testid"],L=["required","data-testid"],Z=["data-testid"],G=["data-testid","disabled"],H=["data-testid","disabled"],x=S({__name:"InputNumber",props:{inputMessage:{},modelValue:{default:0},required:{type:Boolean},isInteger:{type:Boolean,default:!1},min:{default:0},max:{default:1/0},size:{default:R.medium},zeroPad:{type:Boolean,default:!1},modelModifiers:{default:()=>({})},dataTestid:{default:"InputNumber"}},emits:["update:modelValue","focused"],setup(k,{emit:T}){const i=T,t=k,e=P({isPressed:!1,inputElement:t.modelValue||(t.min>0?t.min:0),prevValue:""}),o=/^-?\d{0,10}(\.\d{0,7})?$/,l=z(null);function u(a,n=2){return t.zeroPad&&!isNaN(+a)?String(a).padStart(n,"0"):String(a)}m(()=>t.isInteger,()=>{t.isInteger&&(e.inputElement=p(e.inputElement.toString()),f(e.inputElement))}),m([()=>t.min,()=>t.max],()=>{E(),c()}),m(()=>t.modelValue,(a,n)=>{e.inputElement=t.zeroPad&&(!e.isPressed||Number(n)===0)?u(a):a});const q=a=>{let n=a.target.value;t.zeroPad&&n==="00"||(n=p(n)),f(n),!isNaN(+e.inputElement)&&Number(e.inputElement)<=t.max&&Number(e.inputElement)>=t.min&&i("update:modelValue",e.inputElement)},p=a=>{let n=a.replace(",",".");return t.isInteger&&n.includes(".")&&(n=n.replace(".","")),n==="."?n="0"+n:n==="-."&&(n="-0."+n.slice(2)),/[^\d.]/.test(n)&&(n=n.replace(t.min>=0?/[^0-9.]/g:/[^0-9.-]/g,"")),n.includes("-")&&(n=(n.startsWith("-")?"-":"")+n.replace(/-/g,"")),n.startsWith("0")&&n.length>1&&!n.startsWith("0.")&&(n=n.replace(/^0+/,"")),n.startsWith("-0")&&n.length>2&&!n.startsWith("-0.")&&(n="-"+n.slice(2).replace(/^0+/,"")),(n.match(/\./g)||[]).length>1&&(n=n.slice(0,n.lastIndexOf("."))+n.slice(n.lastIndexOf(".")+1)),n},f=a=>{Number(a)>t.max?e.inputElement=t.max:e.inputElement=a,e.inputElement!==""&&!o.test(`${e.inputElement}`)&&(e.inputElement=e.prevValue)},c=()=>{Number(e.inputElement)<t.min&&(e.inputElement=t.min,i("update:modelValue",+e.inputElement))},E=()=>{Number(e.inputElement)>t.max&&(e.inputElement=t.max,i("update:modelValue",+e.inputElement))},w=a=>{e.prevValue=e.inputElement,a.key==="ArrowUp"&&y(),a.key==="ArrowDown"&&_()},$=a=>{e.isPressed=!0,i("focused",a)},M=()=>{(e.inputElement===""||e.inputElement===null||isNaN(+e.inputElement))&&(e.inputElement=t.min>0?t.min:0),isNaN(+e.inputElement)&&(e.inputElement=Math.max(t.min,0)),Number(e.inputElement)>t.max?e.inputElement=t.max:Number(e.inputElement)<t.min&&(e.inputElement=t.min),e.inputElement=`${e.inputElement}`.replace(/(\.\d*?[1-9])0+$/,"$1").replace(/\.0+$/,""),e.inputElement=u(e.inputElement),i("update:modelValue",e.inputElement),e.isPressed=!1},y=()=>{var a;+e.inputElement+1<t.max?e.inputElement=+e.inputElement+1:t.max!==1/0?e.inputElement=t.max:e.inputElement=0,o.test(`${e.inputElement}`)?(e.inputElement=u(e.inputElement),i("update:modelValue",e.inputElement)):e.inputElement=e.prevValue,(a=l.value)==null||a.focus()},_=()=>{var a;+e.inputElement-1>t.min?e.inputElement=+e.inputElement-1:t.min!==-1/0?e.inputElement=t.min:e.inputElement=0,e.inputElement=u(e.inputElement),i("update:modelValue",+e.inputElement),(a=l.value)==null||a.focus()};return B(()=>{E(),c()}),(a,n)=>(r(),d("fieldset",{class:A(["input-yui-kit input-yui-kit_number initial",{pressed:e.isPressed,[t.size]:!0}]),"data-testid":t.dataTestid,onFocusout:M},[t.inputMessage?(r(),d("legend",{key:0,class:"input-yui-kit__legend","data-testid":`${t.dataTestid}-Legend`},[D(F(t.inputMessage),1),t.required?(r(),d("sup",{key:0,class:"input-yui-kit__star","data-testid":`${t.dataTestid}-Star`},"*",8,O)):V("",!0)],8,K)):V("",!0),C(s("input",{ref_key:"inputNumberRef",ref:l,"onUpdate:modelValue":n[0]||(n[0]=b=>e.inputElement=b),onFocus:$,onInput:q,onKeydown:w,class:"input-yui-kit__input",required:t.required,"data-testid":`${t.dataTestid}-Input`,type:"text"},null,40,L),[[W,e.inputElement]]),s("div",{class:"input-yui-kit__buttons","data-testid":`${t.dataTestid}-Buttons`},[s("button",{class:"input-yui-kit__button-up","data-testid":`${t.dataTestid}-UpButton`,onMousedown:N(y,["prevent"]),disabled:+e.inputElement>=t.max},[g(I,{name:h(v).chevronUp,"data-testid":`${t.dataTestid}-Icon`},null,8,["name","data-testid"])],40,G),s("button",{class:"input-yui-kit__button-down","data-testid":`${t.dataTestid}-DownButton`,onMousedown:N(_,["prevent"]),disabled:+e.inputElement<=t.min},[g(I,{name:h(v).chevronDown,"data-testid":`${t.dataTestid}-Icon`},null,8,["name","data-testid"])],40,H)],8,Z)],42,j))}}),ee=U(x,[["__scopeId","data-v-fcbd447b"]]);x.__docgenInfo={exportName:"default",displayName:"InputNumber",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'InputNumber'"}},{name:"inputMessage",required:!0,type:{name:"string"}},{name:"modelValue",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"required",required:!1,type:{name:"boolean"}},{name:"isInteger",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"min",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"0"}},{name:"max",required:!1,type:{name:"number"},defaultValue:{func:!1,value:"Infinity"}},{name:"size",required:!1,type:{name:"union",elements:[{name:"TSTypeReference"},{name:"TSTypeReference"}]},defaultValue:{func:!1,value:"SizesEnum.medium"}},{name:"zeroPad",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"modelModifiers",required:!1,type:{name:"object"},defaultValue:{func:!1,value:"() => ({})"}}],events:[{name:"update:modelValue",type:{names:["union"],elements:[{name:"number"},{name:"string"}]}},{name:"focused",type:{names:["FocusEvent"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/InputNumber/InputNumber.vue"]};export{ee as I};
