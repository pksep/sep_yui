import{p as U,d as j,k as c,o as P,m as d,q as n,v as f,z as k,u,B as T,y as h,F as y,A as m,I as G,D as C,l,x as J}from"./vue.esm-bundler-BHGztBRP.js";import{a as p,B as _}from"./Badges-bsZZqsGO.js";import{S as K}from"./Search-TLBA3_gY.js";import{I as w,a as B}from"./Icon-BPMvW5pS.js";import{l as Q}from"./lodash-DHyxJ22h.js";import{_ as R}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X=["data-testid"],Y=["data-testid"],Z=["data-testid"],ee=["data-testid"],te=["data-testid"],ae=["data-testid"],se=["data-testid"],ie=["data-testid"],le=["data-testid"],oe=["data-testid"],re=["data-testid"],de=["data-testid"],ne=["data-testid"],ce=["data-testid"],ue=["data-testid"],pe=["data-testid"],he=["onClick","data-testid"],L=U({__name:"Filter",props:{title:{},iconName:{default:w.filter},multiselect:{type:Boolean,default:!1},options:{},defaultValue:{},closeOnSelect:{type:Boolean},searchable:{type:Boolean},dataTestid:{default:"Filter"}},emits:["scroll"],setup(I,{emit:x}){const e=I,i=j({options:[],isShow:!1,searchString:"",choosenStatus:!1,searchItems:[]}),F=x,V=c(()=>({"filter-yui-kit__counter":!0,"counter-yui-kit":!0,"counter-yui-kit--search":e.searchable})),E=c(()=>({"filter-yui-kit__select-list":!0,"selected-yui-kit":!0,"selected-yui-kit--search":e.searchable,"border-none-yui-kit":e.searchable&&r.value.length<2})),N=c(()=>({"filter-yui-kit__wrapper":!0,"active-yui-kit":i.isShow,"filter-yui-kit--search":e.searchable})),q=c(()=>{var t,s;return r.value.length>1&&e.searchable?(t=r.value[1])==null?void 0:t.value:(s=r.value[0])==null?void 0:s.value}),v=Object.values(p),A=t=>{i.searchString=t.trim()},O=t=>{setTimeout(()=>{i.searchString=t},1e3)},z=()=>i.isShow=!i.isShow,D=t=>{t.stopPropagation(),i.options.forEach((s,a)=>S(s,a)),i.isShow=!1},r=c(()=>{let t=i.options.filter(s=>s.choose);return e.searchable&&t.length>1&&(t=t.filter(s=>s.type!==p.default)),t}),b=c(()=>i.options.filter(t=>{let s=!0;return i.searchString&&(s=t.value.toLowerCase().includes(i.searchString.toLowerCase()),s)?t:!t.choose&&s})),g=t=>{e.multiselect||i.options.forEach(s=>s!==t&&(s.choose=!1)),t.choose=!t.choose,r.value.length||i.options.forEach((s,a)=>{S(s,a)})},S=(t,s)=>{typeof e.defaultValue=="string"&&t.value===e.defaultValue?t.choose=!0:Q.isArray(e.defaultValue)?e.defaultValue.forEach(o=>o===t.value&&(t.choose=!0)):t.choose=s===0},M=()=>{i.isShow=!1,i.searchString&&(i.searchString="")},W=t=>{const s=t.target;s.scrollHeight-s.scrollTop===s.clientHeight&&F("scroll",!0)},H=c(()=>{var t,s,a;return r.value.length<=1&&e.searchable?((t=r.value[0])==null?void 0:t.type)===p.default||(s=r.value[0])==null?void 0:s.type:(a=r.value[0])==null?void 0:a.type});return P(()=>{i.options=e.options.map((t,s)=>{const a={value:typeof t=="string"?t:t.value,type:typeof t=="string"?"blue":t.type,choose:!1};return S(a,s),e.searchable&&a.type===p.default&&(a.value="Не выбрано"),a})}),(t,s)=>(l(),d("div",{class:"filter-yui-kit","data-testid":e.dataTestid},[n("div",{class:T(N.value),onClick:z,"data-testid":`${e.dataTestid}-Wrapper`},[f(B,{name:e.iconName,"data-testid":`${e.dataTestid}-Icon`},null,8,["name","data-testid"]),n("span",{"data-testid":`${e.dataTestid}-Title`},k(e.title),9,Z),f(_,{disabled:!0,type:H.value??u(p).default,text:q.value,style:"margin:0 3px;","data-testid":`${e.dataTestid}-Badges`},null,8,["type","text","data-testid"]),n("div",{class:T(V.value),"data-testid":`${e.dataTestid}-Counter`},[r.value.length>1?(l(),d("span",{key:0,class:"counter-yui-kit__value","data-testid":`${e.dataTestid}-Counter-Value`},k("+"+r.value.length),9,te)):h("",!0),n("div",{class:"counter-yui-kit__list","data-testid":`${e.dataTestid}-Counter-List`},[n("div",{class:"counter-yui-kit__list-wrapper","data-testid":`${e.dataTestid}-CounterList-Wrapper`},[n("ul",{class:"filter-yui-kit__select-list select-yui-kit-counter",style:"padding: 2px; gap: 2px","data-testid":`${e.dataTestid}-SelectListCounter-Counter`},[(l(!0),d(y,null,m(r.value,(a,o)=>(l(),d("li",{class:"filter-yui-kit__select-item",key:a.value,"data-testid":`${e.dataTestid}-SelectList-SelectItem${o}`},[f(_,{type:e.searchable?u(p).blue:u(v)[o],disabled:!0,text:a.value,"data-testid":`${e.dataTestid}-SelectList-BadgesTypeEnum${o}`},null,8,["type","text","data-testid"])],8,le))),128))],8,ie)],8,se)],8,ae)],10,ee),n("button",{type:"button",class:"filter-yui-kit__close",onClick:G(D,["stop"]),"data-testid":`${e.dataTestid}-SelectList-ClearFilter`},[f(B,{name:u(w).exitBig},null,8,["name"])],8,oe)],10,Y),i.isShow?(l(),d("div",{key:0,class:"filter-yui-kit__select-wrapper",onMouseleave:M,"data-testid":`${e.dataTestid}-SelectList-SelectWrapper`},[n("ul",{class:T(E.value),"data-testid":`${e.dataTestid}-Select-List`},[(l(!0),d(y,null,m(r.value,(a,o)=>(l(),d("li",{class:"filter-yui-kit__select-item",key:a.value,"data-testid":`${e.dataTestid}-Select-ListItem${o}`},[f(_,{disabled:!0,choosed:a.choose,type:e.searchable?u(p).blue:u(v)[o],onClick:$=>g(a),text:a.value,"data-testid":`${e.dataTestid}-Select-Badges${o}`},null,8,["choosed","type","onClick","text","data-testid"])],8,ne))),128))],10,de),e.searchable?(l(),C(K,{key:0,modelValue:i.searchString,"onUpdate:modelValue":s[0]||(s[0]=a=>i.searchString=a),onEnter:A,onInput:O,style:{margin:"5px 0"},"data-testid":`${e.dataTestid}-Search`},null,8,["modelValue","data-testid"])):h("",!0),i.isShow&&!e.searchable?(l(),d("ul",{key:1,class:"filter-yui-kit__select-list","data-testid":`${e.dataTestid}-SelectList-NoSearch`},[(l(!0),d(y,null,m(b.value,(a,o)=>(l(),d("li",{class:"filter-yui-kit__select-item",key:a.value,style:J(o===0?{paddingTop:"10px"}:""),"data-testid":`${e.dataTestid}-SelectList-Item`},[a.choose?h("",!0):(l(),C(_,{key:0,disabled:!0,choosed:a.choose,type:u(v)[o],text:a.value,onClick:$=>g(a),"data-testid":`${e.dataTestid}-SelectList-Badges`},null,8,["choosed","type","text","onClick","data-testid"]))],12,ue))),128))],8,ce)):h("",!0),i.isShow&&e.searchable?(l(),d("ul",{key:2,class:"filter-yui-kit__select-list filter-yui-kit__select-list--search",onScroll:W,"data-testid":`${e.dataTestid}-SelectList-Search`},[(l(!0),d(y,null,m(b.value,(a,o)=>(l(),d("li",{class:"filter-yui-kit__select-item",key:a.value,onClick:$=>g(a),"data-testid":`${e.dataTestid}-SelectList-Items${o}`},k(a.value),9,he))),128))],40,pe)):h("",!0)],40,re)):h("",!0)],8,X))}}),Se=R(L,[["__scopeId","data-v-9ecc65fb"]]);L.__docgenInfo={exportName:"default",displayName:"Filter",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Filter'"}},{name:"title",required:!0,type:{name:"string"}},{name:"iconName",required:!1,type:{name:"IconNameEnum"},defaultValue:{func:!1,value:"IconNameEnum.filter"}},{name:"multiselect",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"string"}]},{name:"Array",elements:[{name:"IFilterOption"}]}]}},{name:"defaultValue",required:!1,type:{name:"union",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}]}]}},{name:"closeOnSelect",required:!1,type:{name:"boolean"}},{name:"searchable",required:!1,type:{name:"boolean"}}],events:[{name:"scroll",type:{names:["boolean"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Filter/Filter.vue"]};export{Se as F};
