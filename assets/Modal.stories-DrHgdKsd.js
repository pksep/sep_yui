import{S as P}from"./storybook-BJU81olc.js";import{r as c,j as C,R as W,f as O,q as F,Q as U,s as j,k as w,l as z,D as G,n as x,E as K,P as Q,G as H,u as J,b as X,v as b,y as B,T as Y,p as Z}from"./vue.esm-bundler-DJ2C_uUp.js";import{c as A}from"./change-style-properties-1EhjFsjc.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as ee}from"./Button-Dh0v1SVo.js";import{w as te,u as D}from"./index-CGbn3E6N.js";import"./sizes-9jYRAigb.js";const ne=()=>{const e=c(0),s=c([]),t=c(null),i=d=>{s.value.push(d),l(d),n()},m=()=>{s.value.pop(),a(),s.value.length?l(s.value[s.value.length-1]):t.value=null},l=d=>{t.value=d},n=()=>{e.value+=1},a=()=>{e.value>0&&(e.value-=1)};return{countOpenedModal:e,openedModals:s,lastOpenedModal:t,addOpenedModal:i,reduceOpenedModal:m,setLastOpenedModal:l,incrementCountModal:n,decrementCountModal:a}},ae=["data-testid"],oe=["data-testid"],L=C({__name:"Modal",props:{open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted"],setup(e,{expose:s,emit:t}){const{lastOpenedModal:i,addOpenedModal:m,reduceOpenedModal:l}=ne(),n=e,a=c(null),d=W(),h=c(!1),_=O(()=>({width:n.width,height:n.height})),r=t;let g=0;const u=()=>{g=Date.now(),a.value&&(n.open?(a.value.showModal(),m(a.value)):v())},v=()=>{Date.now()-g<300||(l(),r("close"))},R=()=>{var o;(o=a.value)==null||o.close(),document.documentElement.focus(),k()},M=o=>{o.key==="Escape"&&i.value===a.value&&v()},$=()=>{if(document.querySelectorAll(".modal-yui-kit").length===1)return window.innerWidth-document.documentElement.clientWidth;{const p=document.body.style.paddingRight;return Number(p.replace(/\D/g,""))||0}},k=()=>{document.querySelectorAll(".modal-yui-kit").length===0&&A({overflow:"","padding-right":""},document.body)},I=o=>{o.target===a.value&&v()};return s({closeDialog:R}),F(()=>{U(()=>{n.open!==h.value&&(u(),h.value=n.open)}),a.value&&a.value.addEventListener("cancel",p=>{p.preventDefault()});const o=$();A({overflow:"hidden","padding-right":`${o}px`},document.body),document.addEventListener("keydown",M)}),j(()=>{k(),document.removeEventListener("keydown",M),r("unmounted")}),(o,p)=>(w(),z("dialog",Q({ref_key:"dialog",ref:a},J(d),{class:["modal-yui-kit",`modal-yui-kit_${n.position}`],"data-testid":n.dataTestid,onClick:H(I,["self","left"])}),[G("div",{class:"modal-yui-kit__modal-content",style:K(_.value),"data-testid":`${n.dataTestid}-ModalContent`},[x(o.$slots,"default",{},void 0,!0)],12,oe)],16,ae))}}),se=S(L,[["__scopeId","data-v-a609e064"]]);L.__docgenInfo={exportName:"default",displayName:"Modal",description:"",tags:{},expose:[{name:"closeDialog"}],props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"width",required:!1,type:{name:"string"}},{name:"height",required:!1,type:{name:"string"}}],events:[{name:"close"},{name:"unmounted"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/Modal.vue"]};var y=(e=>(e.right="right",e.fade="fade",e))(y||{});const N=C({__name:"ModalAnimated",props:{animateType:{default:y.right},open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted","end-animation"],setup(e,{emit:s}){const t=e,i=s,m=O(()=>{switch(t.animateType){case y.fade:return"fade";case y.right:return"modal";default:return"modal"}}),l=c(null),n=X({function:()=>{}}),a=()=>{r()},d=()=>{i("unmounted")},h=()=>{r()},_=()=>{n.function(),i("end-animation")},r=()=>{var u;l.value&&(n.function=(u=l.value)==null?void 0:u.closeDialog)},g=()=>{r(),i("close")};return(u,v)=>(w(),b(Y,{name:m.value,onAfterLeave:_,onBeforeLeave:h,onAfterEnter:a},{default:B(()=>[t.open?(w(),b(se,{key:0,ref_key:"modalRef",ref:l,open:t.open,position:t.position,width:t.width,height:t.height,"data-testid":t.dataTestid,onClose:g,onUnmounted:d},{default:B(()=>[x(u.$slots,"default",{},void 0,!0)]),_:3},8,["open","position","width","height","data-testid"])):Z("",!0)]),_:3},8,["name"]))}}),V=S(N,[["__scopeId","data-v-8316bcc1"]]);N.__docgenInfo={exportName:"default",displayName:"ModalAnimated",description:"",tags:{},props:[{name:"height",required:!1,type:{name:"string"}},{name:"width",required:!1,type:{name:"string"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"animateType",required:!1,type:{name:"ModalAnimateEnum"},defaultValue:{func:!1,value:"ModalAnimateEnum.right"}}],events:[{name:"close"},{name:"unmounted"},{name:"end-animation"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/ModalAnimated.vue"]};const he={title:"Modal/Modal",component:V,argTypes:{open:{control:{type:P.boolean},defaultValue:!0}},args:{open:!1},tags:["autodocs"]},le=e=>({components:{ModalAnimated:V,Button:ee},setup(){return{args:e}},template:`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  `}),f=le.bind({});f.play=async({canvasElement:e})=>{const t=te(e).getByRole("button");await D.click(t),await D.click(t,{delay:5e3})};var E,T,q;f.parameters={...f.parameters,docs:{...(E=f.parameters)==null?void 0:E.docs,source:{originalSource:`args => ({
  components: {
    ModalAnimated,
    Button
  },
  setup() {
    return {
      args
    };
  },
  template: \`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  \`
})`,...(q=(T=f.parameters)==null?void 0:T.docs)==null?void 0:q.source}}};const ge=["Default"];export{f as Default,ge as __namedExportsOrder,he as default};
