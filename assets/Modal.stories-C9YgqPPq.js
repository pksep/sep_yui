import{S as W}from"./storybook-BJU81olc.js";import{r as c,j as x,K as F,f as C,s as P,L as z,v as K,k as _,l as U,B as j,q as O,n as G,M as H,G as J,u as Q,b as X,x as k,z as b,m as Y,I as Z}from"./vue.esm-bundler-BS9OZKXr.js";import{c as B}from"./change-style-properties-1EhjFsjc.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as ee}from"./Button-DCJ7ATpd.js";import{w as te,u as T}from"./index-CGbn3E6N.js";import"./sizes-9jYRAigb.js";const ne=()=>{const e=c(0),s=c([]),t=c(null),i=d=>{s.value.push(d),l(d),n()},m=()=>{s.value.pop(),o(),s.value.length?l(s.value[s.value.length-1]):t.value=null},l=d=>{t.value=d},n=()=>{e.value+=1},o=()=>{e.value>0&&(e.value-=1)};return{countOpenedModal:e,openedModals:s,lastOpenedModal:t,addOpenedModal:i,reduceOpenedModal:m,setLastOpenedModal:l,incrementCountModal:n,decrementCountModal:o}},oe=["data-testid"],ae=["data-testid"],S=x({__name:"Modal",props:{open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted"],setup(e,{expose:s,emit:t}){const{lastOpenedModal:i,addOpenedModal:m,reduceOpenedModal:l}=ne(),n=e,o=c(null),d=F(),h=c(!1),y=C(()=>({width:n.width,height:n.height})),r=t;let g=0;const u=()=>{g=Date.now(),o.value&&(n.open?(o.value.showModal(),m(o.value)):v())},v=()=>{Date.now()-g<300||(l(),r("close"))},$=()=>{var a;(a=o.value)==null||a.close(),document.documentElement.focus(),M()},w=a=>{a.key==="Escape"&&i.value===o.value&&v()},I=()=>{if(document.querySelectorAll(".modal-yui-kit").length===1)return window.innerWidth-document.documentElement.clientWidth;{const p=document.body.style.paddingRight;return Number(p.replace(/\D/g,""))||0}},M=()=>{document.querySelectorAll(".modal-yui-kit").length===0&&B({overflow:"","padding-right":""},document.body)},R=a=>{a.target===o.value&&v()};return s({closeDialog:$}),P(()=>{z(()=>{n.open!==h.value&&(u(),h.value=n.open)}),o.value&&o.value.addEventListener("cancel",p=>{p.preventDefault()});const a=I();B({overflow:"hidden","padding-right":`${a}px`},document.body),document.addEventListener("keydown",w)}),K(()=>{M(),document.removeEventListener("keydown",w),r("unmounted")}),(a,p)=>(_(),U("dialog",H({ref_key:"dialog",ref:o},Q(d),{class:["modal-yui-kit",`modal-yui-kit_${n.position}`],"data-testid":n.dataTestid,onClick:J(R,["self","left"])}),[j("div",{class:"modal-yui-kit__modal-content",style:G(y.value),"data-testid":`${n.dataTestid}-ModalContent`},[O(a.$slots,"default",{},void 0,!0)],12,ae)],16,oe))}}),se=E(S,[["__scopeId","data-v-3750bc76"]]);S.__docgenInfo={exportName:"default",displayName:"Modal",description:"",tags:{},expose:[{name:"closeDialog"}],props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"width",required:!1,type:{name:"string"}},{name:"height",required:!1,type:{name:"string"}}],events:[{name:"close"},{name:"unmounted"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/Modal.vue"]};var L=(e=>(e.slideTop="slide-top",e.slideLeft="slide-left",e.fadeAndScale="fade-and-scale",e.fade="fade",e))(L||{});const N=x({__name:"ModalAnimated",props:{animateType:{},open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted","end-animation"],setup(e,{emit:s}){const t=e,i=s,m=C(()=>t.animateType===L.fade?"fade":t.position==="bottom"?"slide-bottom":t.position==="right"?"slide-left":"fade-and-scale"),l=c(null),n=X({function:()=>{}}),o=()=>{r()},d=()=>{i("unmounted")},h=()=>{r()},y=()=>{n.function(),i("end-animation")},r=()=>{var u;l.value&&(n.function=(u=l.value)==null?void 0:u.closeDialog)},g=()=>{r(),i("close")};return(u,v)=>(_(),k(Z,{name:m.value,onAfterLeave:y,onBeforeLeave:h,onAfterEnter:o},{default:b(()=>[t.open?(_(),k(se,{key:0,ref_key:"modalRef",ref:l,open:t.open,position:t.position,width:t.width,height:t.height,"data-testid":t.dataTestid,onClose:g,onUnmounted:d},{default:b(()=>[O(u.$slots,"default",{},void 0,!0)]),_:3},8,["open","position","width","height","data-testid"])):Y("",!0)]),_:3},8,["name"]))}}),V=E(N,[["__scopeId","data-v-b0e210a3"]]);N.__docgenInfo={exportName:"default",displayName:"ModalAnimated",description:"",tags:{},props:[{name:"height",required:!1,type:{name:"string"}},{name:"width",required:!1,type:{name:"string"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'},{name:'"bottom"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"animateType",required:!1,type:{name:"ModalAnimateEnum"}}],events:[{name:"close"},{name:"unmounted"},{name:"end-animation"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/ModalAnimated.vue"]};const he={title:"Modal/Modal",component:V,argTypes:{open:{control:{type:W.boolean},defaultValue:!0}},args:{open:!1},tags:["autodocs"]},le=e=>({components:{ModalAnimated:V,Button:ee},setup(){return{args:e}},template:`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  `}),f=le.bind({});f.play=async({canvasElement:e})=>{const t=te(e).getByRole("button");await T.click(t),await T.click(t,{delay:5e3})};var q,D,A;f.parameters={...f.parameters,docs:{...(q=f.parameters)==null?void 0:q.docs,source:{originalSource:`args => ({
  components: {
    ModalAnimated,
    Button
  },
  setup() {
    return {
      args
    };
  },
  template: \`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  \`
})`,...(A=(D=f.parameters)==null?void 0:D.docs)==null?void 0:A.source}}};const ge=["Default"];export{f as Default,ge as __namedExportsOrder,he as default};
