import{S as P}from"./storybook-BJU81olc.js";import{r as u,j as E,R as W,f as O,q as F,Q as U,s as j,k as y,l as z,D as G,n as x,E as K,P as Q,G as H,u as J,b as X,v as k,y as b,T as Y,p as Z}from"./vue.esm-bundler-DJ2C_uUp.js";import{c as B}from"./change-style-properties-1EhjFsjc.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{B as ee}from"./Button-Dh0v1SVo.js";import{w as te,u as D}from"./index-CGbn3E6N.js";import"./sizes-9jYRAigb.js";const ae=()=>{const e=u(0),s=u([]),t=u(null),i=d=>{s.value.push(d),l(d),a()},c=()=>{s.value.pop(),n(),s.value.length?l(s.value[s.value.length-1]):t.value=null},l=d=>{t.value=d},a=()=>{e.value+=1},n=()=>{e.value>0&&(e.value-=1)};return{countOpenedModal:e,openedModals:s,lastOpenedModal:t,addOpenedModal:i,reduceOpenedModal:c,setLastOpenedModal:l,incrementCountModal:a,decrementCountModal:n}},ne=["data-testid"],oe=["data-testid"],S=E({__name:"Modal",props:{open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted"],setup(e,{expose:s,emit:t}){const{lastOpenedModal:i,addOpenedModal:c,reduceOpenedModal:l}=ae(),a=e,n=u(null),d=W(),f=u(!1),r=O(()=>({width:a.width,height:a.height})),g=t;let _=0;const L=()=>{_=Date.now(),n.value&&(a.open?(n.value.showModal(),c(n.value)):v())},v=()=>{Date.now()-_<300||(l(),g("close"))},R=()=>{var o;(o=n.value)==null||o.close(),document.documentElement.focus(),M()},w=o=>{o.key==="Escape"&&i.value===n.value&&v()},$=()=>{if(document.querySelectorAll(".modal-yui-kit").length===1)return window.innerWidth-document.documentElement.clientWidth;{const m=document.body.style.paddingRight;return Number(m.replace(/\D/g,""))||0}},M=()=>{document.querySelectorAll(".modal-yui-kit").length===0&&B({overflow:"","padding-right":""},document.body)},I=o=>{o.target===n.value&&v()};return s({closeDialog:R}),F(()=>{U(()=>{a.open!==f.value&&(L(),f.value=a.open)}),n.value&&n.value.addEventListener("cancel",m=>{m.preventDefault()});const o=$();B({overflow:"hidden","padding-right":`${o}px`},document.body),document.addEventListener("keydown",w)}),j(()=>{M(),document.removeEventListener("keydown",w),g("unmounted")}),(o,m)=>(y(),z("dialog",Q({ref_key:"dialog",ref:n},J(d),{class:["modal-yui-kit",a.position],"data-testid":a.dataTestid,onClick:H(I,["self","left"])}),[G("div",{class:"modal-yui-kit__modal-content",style:K(r.value),"data-testid":`${a.dataTestid}-ModalContent`},[x(o.$slots,"default",{},void 0,!0)],12,oe)],16,ne))}}),se=C(S,[["__scopeId","data-v-b055ba6c"]]);S.__docgenInfo={exportName:"default",displayName:"Modal",description:"",tags:{},expose:[{name:"closeDialog"}],props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"width",required:!1,type:{name:"string"}},{name:"height",required:!1,type:{name:"string"}}],events:[{name:"close"},{name:"unmounted"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/Modal.vue"]};var h=(e=>(e.right="right",e.fade="fade",e))(h||{});const N=E({__name:"ModalAnimated",props:{animateType:{default:h.right},open:{type:Boolean},position:{default:"right"},width:{},height:{},dataTestid:{default:"Modal"}},emits:["close","unmounted","end-animation"],setup(e,{emit:s}){const t=e,i=s,c=O(()=>{switch(t.animateType){case h.fade:return"fade";case h.right:return"modal";default:return"modal"}}),l=u(null),a=X({function:()=>{}}),n=()=>{var r;l.value&&(a.function=(r=l.value)==null?void 0:r.closeDialog),i("close")},d=()=>{i("unmounted")},f=()=>{a.function(),i("end-animation")};return(r,g)=>(y(),k(Y,{name:c.value,onAfterLeave:f},{default:b(()=>[t.open?(y(),k(se,{key:0,ref_key:"modalRef",ref:l,open:t.open,position:t.position,width:t.width,height:t.height,"data-testid":t.dataTestid,onClose:n,onUnmounted:d},{default:b(()=>[x(r.$slots,"default",{},void 0,!0)]),_:3},8,["open","position","width","height","data-testid"])):Z("",!0)]),_:3},8,["name"]))}}),V=C(N,[["__scopeId","data-v-911f7fad"]]);N.__docgenInfo={exportName:"default",displayName:"ModalAnimated",description:"",tags:{},props:[{name:"height",required:!1,type:{name:"string"}},{name:"width",required:!1,type:{name:"string"}},{name:"position",required:!1,type:{name:"union",elements:[{name:'"right"'},{name:'"center"'}]},defaultValue:{func:!1,value:"'right'"}},{name:"open",required:!0,type:{name:"boolean"}},{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Modal'"}},{name:"animateType",required:!1,type:{name:"ModalAnimateEnum"},defaultValue:{func:!1,value:"ModalAnimateEnum.right"}}],events:[{name:"close"},{name:"unmounted"},{name:"end-animation"}],slots:[{name:"default"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Modal/ModalAnimated.vue"]};const he={title:"Modal/Modal",component:V,argTypes:{open:{control:{type:P.boolean},defaultValue:!0}},args:{open:!1},tags:["autodocs"]},le=e=>({components:{ModalAnimated:V,Button:ee},setup(){return{args:e}},template:`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  `}),p=le.bind({});p.play=async({canvasElement:e})=>{const t=te(e).getByRole("button");await D.click(t),await D.click(t,{delay:5e3})};var T,q,A;p.parameters={...p.parameters,docs:{...(T=p.parameters)==null?void 0:T.docs,source:{originalSource:`args => ({
  components: {
    ModalAnimated,
    Button
  },
  setup() {
    return {
      args
    };
  },
  template: \`
    <Button @click="args.open=true"> Open Dialog </Button>
    <ModalAnimated v-bind="args" :open="args.open"  width="30vw" height="100vh" @close="args.open=false" />
  \`
})`,...(A=(q=p.parameters)==null?void 0:q.docs)==null?void 0:A.source}}};const ge=["Default"];export{p as Default,ge as __namedExportsOrder,he as default};
