import{p as D,l as u,m,F as oe,A as le,v as d,u as v,R as H,d as re,r as C,S as ue,w as V,k as l,o as de,a as ce,D as U,Y as pe,G as _,s as N,q as k,z as E,B as R,I as A,y as b,C as me,H as fe,J as ve,L as x}from"./vue.esm-bundler-BHGztBRP.js";import{a as F,B as W}from"./Badges-bsZZqsGO.js";import{I as z,a as G}from"./Icon-BPMvW5pS.js";import{S as he}from"./Search-TLBA3_gY.js";import{a as ye,O as ge,S as Oe,b as T}from"./SelectList-KZ_FBp6l.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as _e}from"./Tooltip-RDqBIpgt.js";import{l as r}from"./lodash-DHyxJ22h.js";const be=["data-testid"],Te=["data-testid"],Y=D({name:"ChoosenMiniOptions",__name:"ChoosenMiniOptions",props:{options:{},dataTestid:{default:"ChoosenMiniOptions"}},emits:["remove"],setup(i,{emit:w}){const e=i,h=w,f=y=>{h("remove",y)};return(y,g)=>(u(),m("div",{class:"choosen-mini-options","data-testid":e.dataTestid},[(u(!0),m(oe,null,le(i.options,(s,o)=>(u(),m("div",{key:s.key,class:"choosen-mini-options__option","data-testid":`${e.dataTestid}-Option-Item${o}`},[d(W,{"data-testid":`${e.dataTestid}-Badge${o}`,type:v(F).blue,text:v(ye)(s)?s.hint:s.value,class:"choosen-mini-options__badges",disabled:""},null,8,["data-testid","type","text"]),d(G,{"data-testid":`${e.dataTestid}-Icon${o}`,name:v(z).crossLarge,width:10,height:10,class:"choosen-mini-options__cross",onClick:c=>f(s.key)},null,8,["data-testid","name","onClick"])],8,Te))),128))],8,be))}}),j=J(Y,[["__scopeId","data-v-d23b1f89"]]);Y.__docgenInfo={name:"ChoosenMiniOptions",exportName:"default",displayName:"ChoosenMiniOptions",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'ChoosenMiniOptions'"}},{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"OptionsObject"}]},{name:"Array",elements:[{name:"IOptionsObjectWithHint"}]}]}}],events:[{name:"remove",type:{names:["string"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Select/ChoosenMiniOptions.vue"]};const Ce=["data-testid"],ke=["data-testid"],we=["data-testid"],Se=["data-testid"],$e=["data-testid"],Be=["data-testid"],K=D({name:"BaseFilter",__name:"BaseFilter",props:H({options:{},title:{},isSearch:{type:Boolean,default:!1},isPosibleToClear:{type:Boolean,default:!1},isShowMiniOptions:{type:Boolean,default:!1},isUseAnchor:{type:Boolean,default:!1},isOpened:{type:Boolean,default:!1},tooltipPosition:{default:"top-center"},onUnmountPagination:{},defaultOption:{default:"Выберите значение"},class:{},disabled:{type:Boolean},dataTestid:{default:"BaseFilter"}},{modelValue:{},modelModifiers:{}}),emits:H(["change","unmount-open","unmount-search","unmount-search-enter","unmount-pagination"],["update:modelValue"]),setup(i,{emit:w}){const e=i,h=re({isHovered:!1}),f=w,y=C(null),g=C(null),s=ue(i,"modelValue"),o=C(e.isOpened);V(o,()=>f("unmount-open",o.value)),V(()=>e.isOpened,()=>{o.value=e.isOpened}),V(()=>e.onUnmountPagination,()=>{L()});const c=C(""),Q=l(()=>{let t=[];return c.value?(T(e.options)?t=e.options.filter(a=>{var n;return a.value.toLowerCase().includes(c.value.toLowerCase())||((n=a==null?void 0:a.hint)==null?void 0:n.toLowerCase().includes(c.value.toLowerCase()))}):t=e.options.filter(a=>a.value.toLowerCase().includes(c.value.toLowerCase())),t):(T(e.options),t=e.options,t)}),p=l(()=>{var a;return((a=e.options.find(n=>r.isArray(s.value)?s.value.includes(n.key):n.key===String(s.value)))==null?void 0:a.value)||e.defaultOption}),X=l(()=>e.options.filter(t=>r.isArray(s.value)?s.value.includes(t.key)&&t.value!==p.value:t.key===String(s.value))),Z=l(()=>e.options.filter(t=>r.isArray(s.value)?s.value.includes(t.key)&&t.value===p.value:t.key===String(s.value))),I=l(()=>{var n,P,q;const t=e.options;let a;return r.isArray(s.value)?T(t)?a=(n=t.find(O=>O.value===p.value))==null?void 0:n.hint:a=(P=t.find(O=>O.value===p.value))==null?void 0:P.value:a=(q=t.find(O=>O.key===String(s.value)))==null?void 0:q.value,a||""}),ee=()=>{h.isHovered=!0},te=()=>{h.isHovered=!1},ae=l(()=>{var t;return T(e.options)?h.isHovered&&!!I.value:((t=y.value)==null?void 0:t.isSpanOverflow)||!1}),se=l(()=>r.isArray(s.value)?e.isPosibleToClear&&s.value.length>0:e.isPosibleToClear&&s.value),S=l(()=>r.isArray(s.value)&&s.value.length>1),$=l(()=>r.isArray(s.value)?s.value.length:null),B=async t=>{if(r.isArray(s.value))s.value.includes(t)?s.value=s.value.filter(a=>a!==t):s.value=[...s.value,t];else{let a=e.options.find(n=>n.key===t);!a&&T(e.options)&&(a=e.options.find(n=>n.hint===t)),s.value=(a==null?void 0:a.key)||"",o.value=!1}await x(),f("change",String(s.value))},ne=t=>{o.value=t},ie=async()=>{r.isArray(s.value)?s.value=[]:s.value="",await x(),f("change",s.value)},M=new IntersectionObserver(t=>{t.forEach(a=>{a.isIntersecting&&f("unmount-pagination")})}),L=()=>{g.value&&e.onUnmountPagination&&(M.unobserve(g.value),M.observe(g.value))};return de(()=>{L()}),ce(()=>{M.disconnect()}),(t,a)=>(u(),U(Oe,{onChange:ne,"is-opened":o.value,class:R(e.class),"is-use-anchor":i.isUseAnchor,"header-classes":"filter__header","options-classes":"filter__options","data-testid":e.dataTestid},pe({header:_(()=>[N(t.$slots,"header",{},()=>[k("span",{class:R(["filter__header-title",{"filter__header-title__active":o.value}]),"data-testid":`${e.dataTestid}-Title`},E(i.title),11,Ce),d(_e,{position:i.tooltipPosition,type:"blue","is-can-show":ae.value&&!(S.value&&i.isShowMiniOptions),hint:I.value,"hint-gap":28,class:"filter__header-tooltip","data-testid":`${e.dataTestid}-Tooltip`},{default:_(()=>[d(W,{ref_key:"badgesRef",ref:y,type:p.value===e.defaultOption?v(F).default:v(F).blue,class:"filter__options-badge","data-testid":`${e.dataTestid}-Badge`,text:p.value,onMouseenter:ee,onMouseleave:te,disabled:""},null,8,["type","data-testid","text"]),S.value&&i.isShowMiniOptions?(u(),m("div",{key:0,class:"filter__values","data-testid":`${e.dataTestid}-Filter-Value`},[d(j,{"data-testid":`${e.dataTestid}-Filter-Value-MiniOptions`,onClick:a[0]||(a[0]=A(()=>{},["stop"])),options:Z.value,onRemove:B},null,8,["data-testid","options"])],8,ke)):b("",!0)]),_:1},8,["position","is-can-show","hint","data-testid"]),$.value&&$.value>1?(u(),m("span",{key:0,class:"filter__count","data-testid":`${e.dataTestid}-Filter-Count`},[me(" +"+E($.value-1)+" ",1),S.value?(u(),m("div",{key:0,class:"filter__values","data-testid":`${e.dataTestid}-Filter-Values`},[d(j,{onClick:a[1]||(a[1]=A(()=>{},["stop"])),options:X.value,onRemove:B,"data-testid":`${e.dataTestid}-MiniOptions`},null,8,["options","data-testid"])],8,Se)):b("",!0)],8,we)):b("",!0),se.value?(u(),m("span",{key:1,class:"filter__cross",onClick:A(ie,["stop"]),"data-testid":`${e.dataTestid}-Filter-Cross`},[d(G,{name:v(z).crossLarge,width:16,height:16},null,8,["name"])],8,$e)):b("",!0)],!0)]),options:_(()=>[i.isSearch?(u(),U(he,{key:0,modelValue:c.value,"onUpdate:modelValue":a[2]||(a[2]=n=>c.value=n),"show-history":!1,"data-testid":`${e.dataTestid}-Search`,onInput:a[3]||(a[3]=n=>t.$emit("unmount-search",n)),onEnter:a[4]||(a[4]=n=>t.$emit("unmount-search-enter",n))},null,8,["modelValue","data-testid"])):b("",!0),d(ge,{"data-testid":`${e.dataTestid}-Options`,class:"filter__options-option",options:Q.value,"default-option":p.value,onChange:B},{default:_(()=>[k("li",{class:"filter__options-underline","data-testid":`${e.dataTestid}-Underline`},[...a[5]||(a[5]=[k("hr",{class:"filter__options-underline-hr"},null,-1)])],8,Be)]),_:1},8,["data-testid","options","default-option"]),fe(k("div",{ref_key:"lastOptionRef",ref:g,class:"filter__last-option"},null,512),[[ve,i.onUnmountPagination]])]),_:2},[t.$slots.body?{name:"body",fn:_(n=>[N(t.$slots,"body",{closeOpenList:n.closeOpenList},void 0,!0)]),key:"0"}:void 0]),1032,["is-opened","class","is-use-anchor","data-testid"]))}}),He=J(K,[["__scopeId","data-v-14ae33e0"]]);K.__docgenInfo={name:"BaseFilter",exportName:"default",displayName:"BaseFilter",description:"",tags:{},props:[{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"OptionsObject"}]},{name:"Array",elements:[{name:"IOptionsObjectWithHint"}]}]}},{name:"title",required:!0,type:{name:"string"}},{name:"isSearch",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isPosibleToClear",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isShowMiniOptions",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isUseAnchor",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"isOpened",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"tooltipPosition",required:!1,type:{name:"TTooltipPosition"},defaultValue:{func:!1,value:"'top-center'"}},{name:"onUnmountPagination",required:!1,type:{name:"TSFunctionType"}},{name:"defaultOption",defaultValue:{func:!1,value:"'Выберите значение'"}},{name:"dataTestid",defaultValue:{func:!1,value:"'BaseFilter'"}}],events:[{name:"unmount-search",type:{names:["string"]}},{name:"unmount-search-enter",type:{names:["string"]}},{name:"change",type:{names:["union"],elements:[{name:"string"},{name:"Array",elements:[{name:"string"}]}]}},{name:"unmount-open",type:{names:["boolean"]}},{name:"unmount-pagination"}],slots:[{name:"body",scoped:!0,bindings:[{name:"close-open-list",title:"binding"}]},{name:"header"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Select/BaseFilter.vue"]};export{He as B};
