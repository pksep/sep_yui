import{j as Q,b as R,f as u,q as X,l as n,D as c,x as f,m as T,u as p,z as $,p as h,F as y,B as _,G as Y,v as w,k as i,E as Z}from"./vue.esm-bundler-DJ2C_uUp.js";import{a as d,B as g}from"./Badges-D3qw1jQj.js";import{S as ee}from"./Search-wFKTKvBN.js";import{I as F,a as B}from"./Icon-CdZCiVYH.js";import{l as te}from"./lodash-DHyxJ22h.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as L}from"./storybook-BJU81olc.js";import"./Button-Dh0v1SVo.js";import"./sizes-9jYRAigb.js";import"./_commonjsHelpers-Cpj98o6Y.js";const se=["data-testid"],le=["data-testid"],ie=["data-testid"],oe=["data-testid"],re=["data-testid"],ne=["data-testid"],de=["data-testid"],ce=["data-testid"],ue=["data-testid"],pe=["data-testid"],he=["data-testid"],fe=["data-testid"],me=["data-testid"],ye=["data-testid"],_e=["data-testid"],ge=["data-testid"],ve=["onClick","data-testid"],N=Q({__name:"Filter",props:{title:{},iconName:{default:F.filter},multiselect:{type:Boolean,default:!1},options:{},defaultValue:{},closeOnSelect:{type:Boolean},searchable:{type:Boolean},dataTestid:{default:"Filter"}},emits:["scroll"],setup(v,{emit:D}){const e=v,l=R({options:[],isShow:!1,searchString:"",choosenStatus:!1,searchItems:[]}),O=D,A=u(()=>({"filter-yui-kit__counter":!0,"counter-yui-kit":!0,"counter-yui-kit--search":e.searchable})),j=u(()=>({"filter-yui-kit__select-list":!0,"selected-yui-kit":!0,"selected-yui-kit--search":e.searchable,"border-none-yui-kit":e.searchable&&r.value.length<2})),z=u(()=>({"filter-yui-kit__wrapper":!0,"active-yui-kit":l.isShow,"filter-yui-kit--search":e.searchable})),M=u(()=>{var t,s;return r.value.length>1&&e.searchable?(t=r.value[1])==null?void 0:t.value:(s=r.value[0])==null?void 0:s.value}),S=Object.values(d),W=t=>{l.searchString=t.trim()},H=t=>{setTimeout(()=>{l.searchString=t},1e3)},U=()=>l.isShow=!l.isShow,G=t=>{t.stopPropagation(),l.options.forEach((s,a)=>b(s,a)),l.isShow=!1},r=u(()=>{let t=l.options.filter(s=>s.choose);return e.searchable&&t.length>1&&(t=t.filter(s=>s.type!==d.default)),t}),C=u(()=>l.options.filter(t=>{let s=!0;return l.searchString&&(s=t.value.toLowerCase().includes(l.searchString.toLowerCase()),s)?t:!t.choose&&s})),k=t=>{e.multiselect||l.options.forEach(s=>s!==t&&(s.choose=!1)),t.choose=!t.choose,r.value.length||l.options.forEach((s,a)=>{b(s,a)})},b=(t,s)=>{typeof e.defaultValue=="string"&&t.value===e.defaultValue?t.choose=!0:te.isArray(e.defaultValue)?e.defaultValue.forEach(o=>o===t.value&&(t.choose=!0)):t.choose=s===0},P=()=>{l.isShow=!1,l.searchString&&(l.searchString="")},J=t=>{const s=t.target;s.scrollHeight-s.scrollTop===s.clientHeight&&O("scroll",!0)},K=u(()=>{var t,s,a;return r.value.length<=1&&e.searchable?((t=r.value[0])==null?void 0:t.type)===d.default||(s=r.value[0])==null?void 0:s.type:(a=r.value[0])==null?void 0:a.type});return X(()=>{l.options=e.options.map((t,s)=>{const a={value:typeof t=="string"?t:t.value,type:typeof t=="string"?"blue":t.type,choose:!1};return b(a,s),e.searchable&&a.type===d.default&&(a.value="Не выбрано"),a})}),(t,s)=>(i(),n("div",{class:"filter-yui-kit","data-testid":e.dataTestid},[c("div",{class:$(z.value),onClick:U,"data-testid":`${e.dataTestid}-Wrapper`},[f(B,{name:e.iconName,"data-testid":`${e.dataTestid}-Icon`},null,8,["name","data-testid"]),c("span",{"data-testid":`${e.dataTestid}-Title`},T(e.title),9,ie),f(g,{disabled:!0,type:K.value??p(d).default,text:M.value,style:"margin:0 3px;","data-testid":`${e.dataTestid}-Badges`},null,8,["type","text","data-testid"]),c("div",{class:$(A.value),"data-testid":`${e.dataTestid}-Counter`},[r.value.length>1?(i(),n("span",{key:0,class:"counter-yui-kit__value","data-testid":`${e.dataTestid}-Counter-Value`},T("+"+r.value.length),9,re)):h("",!0),c("div",{class:"counter-yui-kit__list","data-testid":`${e.dataTestid}-Counter-List`},[c("div",{class:"counter-yui-kit__list-wrapper","data-testid":`${e.dataTestid}-CounterList-Wrapper`},[c("ul",{class:"filter-yui-kit__select-list select-yui-kit-counter",style:"padding: 2px; gap: 2px","data-testid":`${e.dataTestid}-SelectListCounter-Counter`},[(i(!0),n(y,null,_(r.value,(a,o)=>(i(),n("li",{class:"filter-yui-kit__select-item",key:a.value,"data-testid":`${e.dataTestid}-SelectList-SelectItem${o}`},[f(g,{type:e.searchable?p(d).blue:p(S)[o],disabled:!0,text:a.value,"data-testid":`${e.dataTestid}-SelectList-BadgesTypeEnum${o}`},null,8,["type","text","data-testid"])],8,ue))),128))],8,ce)],8,de)],8,ne)],10,oe),c("button",{type:"button",class:"filter-yui-kit__close",onClick:Y(G,["stop"]),"data-testid":`${e.dataTestid}-SelectList-ClearFilter`},[f(B,{name:p(F).exitBig},null,8,["name"])],8,pe)],10,le),l.isShow?(i(),n("div",{key:0,class:"filter-yui-kit__select-wrapper",onMouseleave:P,"data-testid":`${e.dataTestid}-SelectList-SelectWrapper`},[c("ul",{class:$(j.value),"data-testid":`${e.dataTestid}-Select-List`},[(i(!0),n(y,null,_(r.value,(a,o)=>(i(),n("li",{class:"filter-yui-kit__select-item",key:a.value,"data-testid":`${e.dataTestid}-Select-ListItem${o}`},[f(g,{disabled:!0,choosed:a.choose,type:e.searchable?p(d).blue:p(S)[o],onClick:x=>k(a),text:a.value,"data-testid":`${e.dataTestid}-Select-Badges${o}`},null,8,["choosed","type","onClick","text","data-testid"])],8,me))),128))],10,fe),e.searchable?(i(),w(ee,{key:0,modelValue:l.searchString,"onUpdate:modelValue":s[0]||(s[0]=a=>l.searchString=a),onEnter:W,onInput:H,style:{margin:"5px 0"},"data-testid":`${e.dataTestid}-Search`},null,8,["modelValue","data-testid"])):h("",!0),l.isShow&&!e.searchable?(i(),n("ul",{key:1,class:"filter-yui-kit__select-list","data-testid":`${e.dataTestid}-SelectList-NoSearch`},[(i(!0),n(y,null,_(C.value,(a,o)=>(i(),n("li",{class:"filter-yui-kit__select-item",key:a.value,style:Z(o===0?{paddingTop:"10px"}:""),"data-testid":`${e.dataTestid}-SelectList-Item`},[a.choose?h("",!0):(i(),w(g,{key:0,disabled:!0,choosed:a.choose,type:p(S)[o],text:a.value,onClick:x=>k(a),"data-testid":`${e.dataTestid}-SelectList-Badges`},null,8,["choosed","type","text","onClick","data-testid"]))],12,_e))),128))],8,ye)):h("",!0),l.isShow&&e.searchable?(i(),n("ul",{key:2,class:"filter-yui-kit__select-list filter-yui-kit__select-list--search",onScroll:J,"data-testid":`${e.dataTestid}-SelectList-Search`},[(i(!0),n(y,null,_(C.value,(a,o)=>(i(),n("li",{class:"filter-yui-kit__select-item",key:a.value,onClick:x=>k(a),"data-testid":`${e.dataTestid}-SelectList-Items${o}`},T(a.value),9,ve))),128))],40,ge)):h("",!0)],40,he)):h("",!0)],8,se))}}),q=ae(N,[["__scopeId","data-v-9ecc65fb"]]);N.__docgenInfo={exportName:"default",displayName:"Filter",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Filter'"}},{name:"title",required:!0,type:{name:"string"}},{name:"iconName",required:!1,type:{name:"IconNameEnum"},defaultValue:{func:!1,value:"IconNameEnum.filter"}},{name:"multiselect",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"options",required:!0,type:{name:"union",elements:[{name:"Array",elements:[{name:"string"}]},{name:"Array",elements:[{name:"IFilterOption"}]}]}},{name:"defaultValue",required:!1,type:{name:"union",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}]}]}},{name:"closeOnSelect",required:!1,type:{name:"boolean"}},{name:"searchable",required:!1,type:{name:"boolean"}}],events:[{name:"scroll",type:{names:["boolean"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Filter/Filter.vue"]};const Se=[{value:"Все",type:d.default},{value:"Удалено",type:d.pink},{value:"Просрочено",type:d.red},{value:"Покупатель",type:d.blue},{value:"Заказано",type:d.orange},{value:"Отгружено",type:d.green}],Ee={title:"Filter/Filter",component:q,argTypes:{title:{control:{type:L.text}},options:{control:{type:L.object}}},tags:["autodocs"]},ke=v=>({components:{Filter:q},setup(){return{args:v}},template:`
    <div style="display: flex; flex-direction: row; gap: 12px; color: args.color">
      <Filter v-bind="args" />
    </div>
  `}),m=ke.bind({});m.args={title:"Статус",options:Se};var I,E,V;m.parameters={...m.parameters,docs:{...(I=m.parameters)==null?void 0:I.docs,source:{originalSource:`args => ({
  components: {
    Filter
  },
  setup() {
    return {
      args
    };
  },
  template: \`
    <div style="display: flex; flex-direction: row; gap: 12px; color: args.color">
      <Filter v-bind="args" />
    </div>
  \`
})`,...(V=(E=m.parameters)==null?void 0:E.docs)==null?void 0:V.source}}};const Ve=["Default"];export{m as Default,Ve as __namedExportsOrder,Ee as default};
