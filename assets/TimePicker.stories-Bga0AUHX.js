import{j as ee,b as te,r as A,w as I,f as S,S as oe,k as s,l as a,x as l,E as i,u as r,m as g,D as ne,p as w,F as m,I as x,y as p,K as f,L as D,A as P}from"./vue.esm-bundler-DivmSgrp.js";import{B as E,a as z}from"./Button-CYgptqiB.js";import{I as $}from"./InputNumber-yxDWdWod.js";import{D as le}from"./Dialog-KcHsT624.js";import{I as y,a as B}from"./Icon-BwG79YVj.js";import{S as L}from"./sizes-9jYRAigb.js";import{_ as se}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-cQWuTpp4.js";const ae={class:"time-picker-dialog-content"},ie={class:"time-picker-header"},re={key:0,class:"clock-face"},ue={key:1,class:"clock-face"},ce={key:0,class:"clock-number__dot"},me={class:"time-picker-actions"},U=ee({__name:"TimePicker",props:{modelValue:{},disabled:{type:Boolean},hideClearButton:{type:Boolean}},emits:["update:modelValue"],setup(M,{emit:v}){const u=M,N=v,e=te({openModal:!1,hours:void 0,minutes:void 0,editingValue:"hour",openClock:!1,localHours:void 0,localMinutes:void 0}),k=A(null);I(()=>u.modelValue,n=>{if(n){const t=new Date(n);e.localHours=t.getHours(),e.localMinutes=t.getMinutes()}else e.localHours=void 0,e.localMinutes=void 0},{immediate:!0}),I(()=>e.openModal,n=>{n&&(e.hours=Number(e.localHours)||0,e.minutes=Number(e.localMinutes)||0)});const O=S(()=>e.localHours!==void 0&&e.localMinutes!==void 0?`${String(e.localHours).padStart(2,"0")}:${String(e.localMinutes).padStart(2,"0")}`:"-- --"),X=S(()=>({transform:`rotate(${(e.hours??0)%12*30}deg)`})),Z=S(()=>({transform:`rotate(${(e.minutes??0)*6}deg)`}));function V(n,t=100){const o=n%12/12*360,c=t*Math.sin(o*Math.PI/180),d=-t*Math.cos(o*Math.PI/180);return{left:`calc(50% + ${c}px - 24.5px)`,top:`calc(50% + ${d}px - 23.5px)`}}function j(n){var H;const t=(H=k.value)==null?void 0:H.getBoundingClientRect();if(!t)return 0;const o=n.clientX-(t.left+t.width/2),c=n.clientY-(t.top+t.height/2);return(Math.atan2(c,o)*(180/Math.PI)+90+360)%360}function b(n){const t=j(n);if(e.editingValue==="hour"){const c=Math.hypot(n.clientX-(k.value.getBoundingClientRect().left+128),n.clientY-(k.value.getBoundingClientRect().top+128))<90,d=Math.round(t/30)%12||12;e.hours=(c?d+12:d)%24}else e.minutes=Math.round(t/6)%60}function K(n){b(n)}function G(n){b(n),document.addEventListener("mousemove",_),document.addEventListener("mouseup",C)}function _(n){b(n)}function C(){document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",C)}oe(()=>C());function T(){e.openModal=!1}function J(){e.editingValue="hour",e.openModal=!0}function Q(){if(e.hours===void 0||e.minutes===void 0)return;const n=u.modelValue?new Date(u.modelValue):new Date,t=new Date(n.getFullYear(),n.getMonth(),n.getDate(),+e.hours,+e.minutes,0,0),o=new Date(t.getTime()).toISOString();N("update:modelValue",o),e.localHours=e.hours,e.localMinutes=e.minutes,T()}function W(){e.hours=void 0,e.minutes=void 0,e.localHours=void 0,e.localMinutes=void 0,N("update:modelValue",null)}return(n,t)=>(s(),a(f,null,[l("div",{class:m({"time-picker-select":!0,disabled:u.disabled})},[l("div",{class:"time-picker-select-content",onClick:J},[i(B,{name:r(y).time},null,8,["name"]),l("span",null,g(O.value),1),!u.hideClearButton&&(e.localHours!==void 0||e.localMinutes!==void 0)?(s(),a("div",{key:0,class:"time-picker-select-clear",onClick:ne(W,["stop"])},[i(B,{name:r(y).closeTag,width:16,height:16},null,8,["name"])])):w("",!0)])],2),i(le,{open:e.openModal,onClose:T,class:"time-picker-dialog",width:"328px"},{default:x(()=>[l("div",ae,[t[11]||(t[11]=l("h3",null,"Установка времени",-1)),l("div",ie,[l("div",null,[i($,{"model-value":e.hours,"onUpdate:modelValue":t[0]||(t[0]=o=>e.hours=+o),min:0,max:23,class:m({"time-picker-input":!0,pressed:e.editingValue==="hour"}),"input-message":"","is-integer":"","zero-pad":"",onClick:t[1]||(t[1]=o=>e.editingValue="hour")},null,8,["model-value","class"]),t[5]||(t[5]=l("span",null,"Часы",-1))]),t[7]||(t[7]=l("span",{class:"time-picker-separator"},":",-1)),l("div",null,[i($,{"model-value":e.minutes,"onUpdate:modelValue":t[2]||(t[2]=o=>e.minutes=+o),min:0,max:59,class:m({"time-picker-input":!0,pressed:e.editingValue==="minute"}),"input-message":"","is-integer":"","zero-pad":"",onClick:t[3]||(t[3]=o=>e.editingValue="minute")},null,8,["model-value","class"]),t[6]||(t[6]=l("span",null,"Минуты",-1))])]),e.openClock?(s(),a("div",{key:0,class:"time-picker-clock",ref_key:"clockRef",ref:k,onMousedown:G,onClick:K},[e.editingValue==="hour"?(s(),a("div",re,[l("div",{class:"clock-hand",style:p(X.value)},null,4),(s(),a(f,null,D(12,o=>l("div",{key:"outer-"+o,class:m({"clock-number":!0,active:o===Number(e.hours)}),style:p(V(o,100))},g(o),7)),64)),(s(),a(f,null,D(12,o=>l("div",{key:"inner-"+o,class:m({"clock-number":!0,active:o+12===(Number(e.hours)||24)}),style:p(V(o+12,70))},g(o+12),7)),64))])):(s(),a("div",ue,[l("div",{class:"clock-hand",style:p(Z.value)},null,4),(s(!0),a(f,null,D(Array.from({length:60},(o,c)=>c),o=>(s(),a("div",{key:o,class:m({"clock-number":!0,active:o===Number(e.minutes||0)}),style:p(V(o/5,100))},[o===Number(e.minutes)&&o%5?(s(),a("div",ce)):w("",!0),P(" "+g(o%5?"":o%60),1)],6))),128))])),t[8]||(t[8]=l("div",{class:"clock-hand-center"},null,-1))],544)):w("",!0),l("div",me,[l("div",{class:"time-picker-actions__switch",onClick:t[4]||(t[4]=o=>e.openClock=!e.openClock)},[i(B,{name:e.openClock?r(y).keyboard:r(y).time},null,8,["name"])]),i(E,{size:r(L).little,type:r(z).ghost,onClick:T},{default:x(()=>[...t[9]||(t[9]=[P("Отменить ",-1)])]),_:1},8,["size","type"]),i(E,{size:r(L).little,type:r(z).primary,onClick:Q},{default:x(()=>[...t[10]||(t[10]=[P("Сохранить ",-1)])]),_:1},8,["size","type"])])])]),_:1},8,["open"])],64))}}),Y=se(U,[["__scopeId","data-v-f2fea77d"]]);U.__docgenInfo={exportName:"default",displayName:"TimePicker",description:"",tags:{},props:[{name:"modelValue",required:!1,type:{name:"union",elements:[{name:"string"},{name:"null"}]}},{name:"disabled",required:!1,type:{name:"boolean"}},{name:"hideClearButton",required:!1,type:{name:"boolean"}}],events:[{name:"update:modelValue",type:{names:["union"],elements:[{name:"string"},{name:"null"}]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/TimePicker/TimePicker.vue"]};const Ve={title:"TimePicker/TimePicker",component:Y,argTypes:{},args:{},tags:["autodocs"]},de=M=>({components:{TimePicker:Y},setup(){const v=A("2022-01-14T14:48:33.392Z");return I(v,u=>{console.log("Selected time:",u)}),{args:M,modelValue:v}},template:`
    <TimePicker v-bind="args" v-model="modelValue" />
  `}),h=de.bind({});var F,R,q;h.parameters={...h.parameters,docs:{...(F=h.parameters)==null?void 0:F.docs,source:{originalSource:`(args: ITimePickerProps) => ({
  components: {
    TimePicker
  },
  setup() {
    const modelValue = ref('2022-01-14T14:48:33.392Z');
    watch(modelValue, val => {
      console.log('Selected time:', val);
    });
    return {
      args,
      modelValue
    };
  },
  template: \`
    <TimePicker v-bind="args" v-model="modelValue" />
  \`
})`,...(q=(R=h.parameters)==null?void 0:R.docs)==null?void 0:q.source}}};const be=["TimePickerDefault"];export{h as TimePickerDefault,be as __namedExportsOrder,Ve as default};
