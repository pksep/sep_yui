import{j as L,b as O,f as h,r as P,s as R,U as j,k,l as C,x as a,E as l,F,m as w,I as H,u as i,H as z,p as x}from"./vue.esm-bundler-DC1UwcWE.js";import{a as G,B as J}from"./Button-BcbnAUXm.js";import{a as d,I as r}from"./Icon-BRmBMtLe.js";import{a as K,T as Q}from"./Toggle-BNCkOmxn.js";import{S as W}from"./Switch-BqK-ETo-.js";import{A as X}from"./Avatar-Bd1L-4LG.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as _}from"./storybook-BJU81olc.js";import"./sizes-9jYRAigb.js";var u=(o=>(o.profile="profile",o.theme="theme",o.options="options",o.exit="exit",o.help="help",o))(u||{});const Z=["data-testid"],ee={class:"menu-yui-kit__wrapper"},te={class:"menu-yui-kit__names"},ae={class:"menu-yui-kit__name"},se={class:"menu-yui-kit__role"},ie={key:0,class:"menu-yui-kit__list"},ne={class:"list-yui-kit"},oe=["data-testid"],le=["data-testid"],re=["data-testid"],ue=["data-testid"],de=["data-testid"],me=["data-type"],$=L({__name:"UserMenu",props:{closeAfterClick:{type:Boolean},user:{},languages:{},isBlackTheme:{type:Boolean},dataTestid:{default:"UserMenu"}},emits:["click","themeChange","languageSwitch"],setup(o,{emit:M}){const e=o,s=O({isShow:!1,option:"",isBlackTheme:e.isBlackTheme??!1}),g=M,E=h(()=>({"menu-yui-kit__heading":!0,"active-yui-kit":s.isShow})),A=h(()=>s.isBlackTheme?r.dark:r.light),f=P(null),y=n=>{f.value&&!f.value.contains(n.target)&&(s.isShow=!1)};R(()=>{document.addEventListener("click",y)}),j(()=>{document.removeEventListener("click",y)});const m=n=>{n!==void 0?(s.option=n,g("click",n),e.closeAfterClick&&(s.isShow=!1)):console.error("Option type is undefined")},V=h(()=>s.isShow?r.chevronUp:r.chevronDown),N=()=>{s.isShow=!s.isShow},q=n=>{e.closeAfterClick&&(s.isShow=!1),g("themeChange",n),s.isBlackTheme=n},D=n=>{e.closeAfterClick&&(s.isShow=!1),g("languageSwitch",n)};return(n,t)=>{var v,T,S;return k(),C("div",{class:"menu-yui-kit",ref_key:"menuRef",ref:f,"data-testid":e.dataTestid},[a("div",ee,[l(X,{class:"menu-yui-kit__avatar",url:e.user.avatar,alt:"user-avatar","data-testid":`${e.dataTestid}-Avatar`},null,8,["url","data-testid"]),a("div",{class:F(E.value),onClick:N},[a("div",te,[a("p",ae,w(e.user.name),1),a("p",se,w(e.user.role),1)]),l(J,{type:i(G).ghost,class:"menu-yui-kit__button","data-testid":`${e.dataTestid}-Toggle`},{default:H(()=>[l(d,{class:"menu-yui-kit__button-icon",name:V.value},null,8,["name"])]),_:1},8,["type","data-testid"])],2)]),s.isShow?(k(),C("div",ie,[a("ul",ne,[a("li",{class:"list-yui-kit__item",onClick:t[0]||(t[0]=p=>m(i(u).profile)),"data-testid":`${e.dataTestid}-Profile-Item`},[l(d,{name:i(r).profile},null,8,["name"]),t[5]||(t[5]=a("span",{class:"list-yui-kit__item-text"},"Профиль",-1))],8,oe),a("li",{class:"list-yui-kit__item","data-testid":`${e.dataTestid}-Theme-Item`},[l(d,{name:A.value},null,8,["name"]),a("span",{class:"list-yui-kit__item-text",onClick:t[1]||(t[1]=p=>m(i(u).theme))},"Темная тема"),l(Q,{type:i(K).small,onChange:q,checked:s.isBlackTheme,"data-testid":`${e.dataTestid}-Theme-Toggle`},null,8,["type","checked","data-testid"])],8,le),a("li",{class:"list-yui-kit__item",onClick:t[2]||(t[2]=p=>m(i(u).options)),"data-testid":`${e.dataTestid}-Settings-Item`},[l(d,{name:i(r).settings},null,8,["name"]),t[6]||(t[6]=a("span",{class:"list-yui-kit__item-text"},"Настройки",-1))],8,re),a("li",{class:"list-yui-kit__item",onClick:t[3]||(t[3]=p=>m(i(u).exit)),"data-testid":`${e.dataTestid}-Exit-Item`},[l(d,{name:i(r).exit},null,8,["name"]),t[7]||(t[7]=a("span",{class:"list-yui-kit__item-text"},"Выход",-1))],8,ue),a("li",{class:"list-yui-kit__item",onClick:t[4]||(t[4]=p=>m(i(u).help)),"data-testid":`${e.dataTestid}-Help-Item`},[l(d,{name:i(r).help},null,8,["name"]),a("span",{class:"list-yui-kit__item-text","data-type":i(u).help},"Помощь",8,me)],8,de)]),(v=e.languages)!=null&&v.items?(k(),z(W,{key:0,items:(T=e.languages)==null?void 0:T.items,defaultValue:(S=e.languages)==null?void 0:S.defaultValue,onChange:D,"data-testid":`${e.dataTestid}-Language-Switch`},null,8,["items","defaultValue","data-testid"])):x("",!0)])):x("",!0)],8,Z)}}}),b=Y($,[["__scopeId","data-v-82d45bca"]]);$.__docgenInfo={exportName:"default",displayName:"UserMenu",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'UserMenu'"}},{name:"isBlackTheme",required:!1,type:{name:"boolean"}},{name:"languages",required:!1,type:{name:"ISwitchProps"}},{name:"user",required:!0,type:{name:"userType"}},{name:"closeAfterClick",required:!1,type:{name:"boolean"}}],events:[{name:"click",type:{names:["MenuTypeEnum"]}},{name:"themeChange",type:{names:["boolean"]}},{name:"languageSwitch",type:{names:["IChangeSwitchEmit"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/UserMenu/UserMenu.vue"]};const Se={title:"UserMenu/UserMenu",component:b,argTypes:{name:{control:{type:_.text}},role:{control:{type:_.text}},avatar:{control:{type:_.text}},languages:{control:{type:_.boolean}}},tags:["autodocs"]},ce=o=>({components:{UserMenu:b},setup(){return{args:o}},template:'<UserMenu v-bind="args"/> '}),c=ce.bind({});c.args={user:{name:"David Perov",role:"admin",avatar:"/default-avatar.jpg"},languages:{items:["En","Ru"]}};var B,U,I;c.parameters={...c.parameters,docs:{...(B=c.parameters)==null?void 0:B.docs,source:{originalSource:`args => ({
  components: {
    UserMenu
  },
  setup() {
    return {
      args
    };
  },
  template: \`<UserMenu v-bind="args"/> \`
})`,...(I=(U=c.parameters)==null?void 0:U.docs)==null?void 0:I.source}}};const Ce=["Default"];export{c as Default,Ce as __namedExportsOrder,Se as default};
