import{j as I,b as q,f as x,k as o,l as c,H as w,I as V,x as r,u,F as k,p,K as P,L as D,m as b,E as v,r as E,w as A,s as W,B as G,C as Q,N as X}from"./vue.esm-bundler-DivmSgrp.js";import{a as H,I as B}from"./Icon-BwG79YVj.js";import{a as T,B as $}from"./Button-CYgptqiB.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Y=(a,h=33)=>a.length>h?a.slice(0,h-3)+"...":a,Z=["data-testid"],ee=["data-testid"],te=["data-testid"],se=["data-testid"],ae=["onClick","data-testid"],oe=["data-testid"],M=I({__name:"History",props:{modelValue:{},defaultValue:{},placeholder:{},showHistory:{type:Boolean},global:{type:Boolean},options:{},globalResultsFunction:{},isShowList:{type:Boolean},isShowButtonHistory:{type:Boolean},searchValue:{},width:{},height:{},dataTestid:{default:"History"}},emits:["choosePost","unmount-remove"],setup(a,{emit:h}){const e=a,s=q({isShowList:e.isShowList,isShowButtonHistory:e.isShowButtonHistory}),i=h,S=x(()=>({"history-yui-kit__list":!0,"history-yui-kit__list--opened":s.isShowList,"history-yui-kit__list--scroll":e.modelValue&&e.modelValue.length>=5&&s.isShowList})),g=()=>{s.isShowList=!0,s.isShowButtonHistory=!1},t=l=>{i("unmount-remove",l)},y=l=>{i("choosePost",l)};return(l,n)=>{var m;return e.showHistory?(o(),c("div",{key:0,class:"search-yui-kit__history history-yui-kit","data-testid":e.dataTestid},[s.isShowButtonHistory?(o(),w($,{key:0,type:u(T).outline,onClick:g,class:k("history-yui-kit__button-text show-result"),"data-testid":`${e.dataTestid}-ShowResult`},{default:V(()=>[r("span",{"data-testid":`${e.dataTestid}-ShowResult-Title`}," Просмотреть историю запросов ",8,ee)]),_:1},8,["type","data-testid"])):p("",!0),(m=e.modelValue)!=null&&m.length?(o(),c("ul",{key:1,class:k(S.value),"data-testid":`${e.dataTestid}-ShowResult-List`},[(o(!0),c(P,null,D(e.modelValue,(_,f)=>(o(),c("li",{class:"history-yui-kit__item",key:_,"data-testid":`${e.dataTestid}-ShowResult-Title${f}`},[r("span",{onClick:R=>y(_),"data-testid":`${e.dataTestid}-HandleChoosePost-Title${f}`},b(u(Y)(_)),9,ae),v($,{type:u(T).ghost,onClick:R=>t(_),"data-testid":`${e.dataTestid}-ButtonItem-Remove${f}`},{default:V(()=>[v(H,{name:u(B).exitSmall,width:16,"data-testid":`${e.dataTestid}-ButtonItem-RemoveIcon${f}`},null,8,["name","data-testid"])]),_:2},1032,["type","onClick","data-testid"])],8,se))),128))],10,te)):s.isShowButtonHistory?p("",!0):(o(),w($,{key:2,type:u(T).outline,class:k("history-yui-kit__button-text"),"data-testid":`${e.dataTestid}-ButtonTypeEnum-RemoveButton`},{default:V(()=>[r("span",{"data-testid":`${e.dataTestid}-ButtonTypeEnum-EmptyContent`,class:"empty-content"},"По вашему запросу ничего не найдено",8,oe)]),_:1},8,["type","data-testid"]))],8,Z)):p("",!0)}}}),le=C(M,[["__scopeId","data-v-f1c6a579"]]);M.__docgenInfo={exportName:"default",displayName:"History",description:"",tags:{},props:[{name:"dataTestid",defaultValue:{func:!1,value:"'History'"}}],events:[{name:"choosePost",type:{names:["string"]}},{name:"unmount-remove",type:{names:["string"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Search/History.vue"]};const ie=["data-testid"],ne=["data-testid"],re=["data-testid","onClick"],ue=["data-testid"],de=["data-testid"],ce=["data-testid"],he=["data-testid"],me=["data-testid"],pe=["data-testid"],J=I({__name:"SearchResult",props:{defaultValue:{},placeholder:{},showHistory:{type:Boolean},global:{type:Boolean},options:{},globalResultsFunction:{default:()=>[]},isShowList:{type:Boolean},isShowButtonHistory:{type:Boolean},searchValue:{default:""},width:{},height:{},modelValue:{},dataTestid:{default:"SearchResult"}},emits:["choose-result","scroll-paginate"],setup(a,{emit:h}){const e=a,s=h,i=E(null),S=t=>{s("choose-result",t)},g=t=>{const y=t.target,{scrollTop:l,scrollHeight:n,clientHeight:m}=y;n-l-m<5&&s("scroll-paginate")};return A(()=>e.searchValue,()=>{i.value&&(i.value.scrollTop=0)}),(t,y)=>(o(),c("div",{class:"search-yui-kit__result result-yui-kit","data-testid":e.dataTestid},[e.globalResultsFunction.length>0?(o(),c("ul",{key:0,class:"result-yui-kit__list","data-testid":`${e.dataTestid}-List`,onScroll:g,ref_key:"resultContentRef",ref:i},[(o(!0),c(P,null,D(e.globalResultsFunction,(l,n)=>(o(),c("li",{class:"result-yui-kit__list__item",key:n,"data-testid":`${e.dataTestid}-List-Items${n}`,onClick:m=>S(l)},[v(H,{name:l.icon||u(B).document,"data-testid":`${e.dataTestid}-Items-Icon${n}`,width:16,height:16,class:"result-yui-kit__list__item__icon"},null,8,["name","data-testid"]),r("span",{"data-testid":`${e.dataTestid}-Result-NameArea${n}`},b(l.nameArea),9,ue),r("span",{class:"blue-yui-kit","data-testid":`${e.dataTestid}-Result-Slash${n}`},"/",8,de),r("span",{class:"blue-yui-kit","data-testid":`${e.dataTestid}-Result-SearchResult${n}`},b(l.searchResult),9,ce)],8,re))),128))],40,ne)):e.searchValue?(o(),c("ul",{key:1,class:"result-yui-kit__list result-yui-kit__empty","data-testid":`${e.dataTestid}-Nothing-List`},[r("li",{class:"result-yui-kit__empty__item","data-testid":`${e.dataTestid}-Nothing-Items`},[r("p",{"data-testid":`${e.dataTestid}-Nothing-Text`}," По вашему запросу ничего не найдено ",8,pe)],8,me)],8,he)):p("",!0)],8,ie))}}),ye=C(J,[["__scopeId","data-v-0bd12f80"]]);J.__docgenInfo={exportName:"default",displayName:"SearchResult",description:"",tags:{},props:[{name:"dataTestid",defaultValue:{func:!1,value:"'SearchResult'"}},{name:"globalResultsFunction",defaultValue:{func:!1,value:"() => []"}},{name:"searchValue",defaultValue:{func:!1,value:"''"}}],events:[{name:"choose-result",type:{names:["ResultSearchType"]}},{name:"scroll-paginate"}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Search/SearchResult.vue"]};const _e=()=>{const a=E(localStorage.getItem("historySearch")?JSON.parse(localStorage.getItem("historySearch")):[]);return{getHistorySearch:a,addHistorySearch:s=>{s&&(a.value=a.value.filter(i=>i!==s),a.value.unshift(s),a.value.length>10&&a.value.pop(),localStorage.setItem("historySearch",JSON.stringify(a.value)))},removeHistorySearch:s=>{a.value=a.value.filter(i=>i!==s),localStorage.setItem("historySearch",JSON.stringify(a.value))}}},fe=["data-testid"],Se=["data-testid"],ge=["data-testid"],we=["placeholder","data-testid"],K=I({__name:"Search",props:{defaultValue:{},placeholder:{default:"Поиск"},showHistory:{type:Boolean},global:{type:Boolean,default:!1},options:{},globalResultsFunction:{default:()=>[]},isShowList:{type:Boolean},isShowButtonHistory:{type:Boolean},searchValue:{},width:{},height:{default:"42px"},modelValue:{default:""},dataTestid:{default:"Search"}},emits:["enter","input","update:modelValue","choose-result","scroll-paginate","choosed"],setup(a,{emit:h}){const e=a,s=h,{getHistorySearch:i,removeHistorySearch:S,addHistorySearch:g}=_e(),t=q({isShowList:!1,isShowButtonHistory:e.showHistory??!1,searchValue:e.modelValue,placeholder:e.placeholder??"",focused:!1}),y={position:"relative",width:"100%",height:e.height},l=d=>{t.searchValue=d.trim(),t.isShowList=!1,s("input",d),s("update:modelValue",t.searchValue),s("choosed",t.searchValue),s("enter",t.searchValue)},n=d=>{t.isShowList=!1,s("choose-result",d)},m=()=>{s("scroll-paginate")},_=x(()=>({"search-yui-kit__icon-wrapper":!0})),f=()=>{t.focused=!0},R=()=>{setTimeout(()=>{t.focused=!1},500)},O=()=>{t.isShowList=!1,t.isShowButtonHistory=!1},U=()=>{t.isShowButtonHistory=!0,t.isShowButtonHistory||(t.isShowList=!0)},L=()=>{s("enter",t.searchValue.trim()),e.showHistory&&t.searchValue&&g(t.searchValue.trim())},N=()=>{const d=t.searchValue.trim();s("input",d),s("update:modelValue",d)},j=()=>{t.searchValue&&(t.searchValue="",N(),L())};return W(()=>{e.defaultValue&&(t.searchValue=e.defaultValue)}),A(()=>e.modelValue,d=>{t.searchValue=d}),(d,F)=>(o(),c("div",{class:"search-yui-kit",style:y,onMousemove:U,onMouseleave:O,"data-testid":e.dataTestid},[r("div",{class:k(_.value),"data-testid":`${e.dataTestid}-Dropdown-Wrapper`},[r("div",{class:"search-yui-kit__dropdown","data-testid":`${e.dataTestid}-Dropdown`},[G(r("input",{type:"text",class:"search-yui-kit__input","onUpdate:modelValue":F[0]||(F[0]=z=>t.searchValue=z),placeholder:e.placeholder,onKeydown:X(L,["enter"]),onInput:N,onFocus:f,onBlur:R,"data-testid":`${e.dataTestid}-Dropdown-Input`},null,40,we),[[Q,t.searchValue]]),v(H,{class:"search-icon",name:u(B).searchNormal},null,8,["name"]),t.searchValue?(o(),w($,{key:0,class:"clear-button",type:u(T).ghost,onClick:j,"data-testid":`${e.dataTestid}-Clear-Button`},{default:V(()=>[v(H,{name:u(B).exitSmall,color:"var(--grey4)","data-testid":`${e.dataTestid}-Clear-Button-Icon`},null,8,["name","data-testid"])]),_:1},8,["type","data-testid"])):p("",!0)],8,ge)],10,Se),!e.global&&e.showHistory?(o(),w(le,{key:0,"show-history":e.showHistory,"is-show-button-history":t.isShowButtonHistory,"is-show-list":t.isShowList,"model-value":u(i),onUnmountRemove:u(S),onChoosePost:l,"data-testid":`${e.dataTestid}-Dropdown-History`},null,8,["show-history","is-show-button-history","is-show-list","model-value","onUnmountRemove","data-testid"])):p("",!0),e.global&&t.focused?(o(),w(ye,{key:1,"global-results-function":e.globalResultsFunction,"search-value":t.searchValue,"data-testid":`${e.dataTestid}-Dropdown-SearchResult`,onChooseResult:n,onScrollPaginate:m},null,8,["global-results-function","search-value","data-testid"])):p("",!0)],40,fe))}}),$e=C(K,[["__scopeId","data-v-8a012073"]]);K.__docgenInfo={exportName:"default",displayName:"Search",description:"",tags:{},props:[{name:"dataTestid",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Search'"}},{name:"defaultValue",required:!1,type:{name:"string"}},{name:"placeholder",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'Поиск'"}},{name:"showHistory",required:!1,type:{name:"boolean"}},{name:"global",required:!1,type:{name:"boolean"},defaultValue:{func:!1,value:"false"}},{name:"options",required:!1,type:{name:"Array",elements:[{name:"string"}]}},{name:"globalResultsFunction",required:!1,type:{name:"Array",elements:[{name:"ResultSearchType"}]},defaultValue:{func:!1,value:"() => []"}},{name:"isShowList",required:!1,type:{name:"boolean"}},{name:"isShowButtonHistory",required:!1,type:{name:"boolean"}},{name:"searchValue",required:!1,type:{name:"string"}},{name:"width",required:!1,type:{name:"string"}},{name:"height",required:!1,type:{name:"string"},defaultValue:{func:!1,value:"'42px'"}},{name:"modelValue",required:!0,type:{name:"string"},defaultValue:{func:!1,value:"''"}}],events:[{name:"enter",type:{names:["string"]}},{name:"input",type:{names:["string"]}},{name:"update:modelValue",type:{names:["string"]}},{name:"choose-result",type:{names:["ResultSearchType"]}},{name:"scroll-paginate"},{name:"choosed",type:{names:["string"]}}],sourceFiles:["/home/runner/work/sep_yui/sep_yui/src/components/Search/Search.vue"]};export{$e as S};
